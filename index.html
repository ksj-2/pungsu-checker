
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO & Sharing Optimization -->
    <title>ìš°ë¦¬ì§‘ í’ìˆ˜ ì§„ë‹¨ | ë¬´ë£Œ í’ìˆ˜ì§€ë¦¬, ì§‘í„°, ëª…ë‹¹, ì´ì‚¬ë°©í–¥ ì „ë¬¸ê°€ ë¶„ì„</title>
    <meta name="description" content="ì´ì‚¬, ìì·¨, ë‚´ ì§‘ ë§ˆë ¨ ì „ í•„ìˆ˜ í™•ì¸! í’ìˆ˜ ì „ë¬¸ê°€ê°€ ì•Œë ¤ì£¼ëŠ” ìš°ë¦¬ì§‘ ì§‘í„°, ëª…ë‹¹, ì´ì‚¬ë°©í–¥ì„ ë¬´ë£Œë¡œ ë¶„ì„í•´ ë“œë¦½ë‹ˆë‹¤. AI ì…€í”„ í’ìˆ˜ ì§„ë‹¨ìœ¼ë¡œ ì¢‹ì€ ê¸°ìš´ì„ í™•ì¸í•˜ì„¸ìš”.">
    <meta name="keywords" content="í’ìˆ˜, í’ìˆ˜ì§€ë¦¬, í’ìˆ˜ì „ë¬¸ê°€, ëª…ë‹¹, ì§‘í„°, ì´ì‚¬ë°©í–¥, ë¬´ë£Œí’ìˆ˜, ì•„íŒŒíŠ¸í’ìˆ˜, ì´ì‚¬í’ìˆ˜, ìì·¨ë°©í’ìˆ˜, AIí’ìˆ˜, ìš°ë¦¬ì§‘í’ìˆ˜, í’ìˆ˜ì ìˆ˜, í’ìˆ˜ì§„ë‹¨">

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1819982598567420"
     crossorigin="anonymous"></script>
<meta name="google-adsense-account" content="ca-pub-1819982598567420">
    
    <!-- Open Graph Tags for Social Sharing -->
    <meta property="og:title" content="ìš°ë¦¬ì§‘ í’ìˆ˜ ì§„ë‹¨ | ë¬´ë£Œ í’ìˆ˜ì§€ë¦¬, ì§‘í„°, ëª…ë‹¹, ì´ì‚¬ë°©í–¥ ì „ë¬¸ê°€ ë¶„ì„">
    <meta property="og:description" content="ì´ì‚¬, ìì·¨, ë‚´ ì§‘ ë§ˆë ¨ ì „ í•„ìˆ˜ í™•ì¸! AI ì…€í”„ í’ìˆ˜ ì§„ë‹¨ìœ¼ë¡œ ìš°ë¦¬ì§‘ ì§‘í„°, ëª…ë‹¹, ì´ì‚¬ë°©í–¥ì„ ë¬´ë£Œë¡œ ë¶„ì„í•˜ê³  ì¢‹ì€ ê¸°ìš´ì„ í™•ì¸í•˜ì„¸ìš”.">
    <meta property="og:image" content="https://picsum.photos/seed/fengshui_og/1200/630">
    <meta property="og:url" content="https://ksj-2.github.io/pungsu-checker/">
    <meta property="og:type" content="website">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Custom scrollbar for better aesthetics in dark mode */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
        input[type="radio"] { box-shadow: none; }
    
html, body { overflow-x: hidden; }
  img, svg, video, canvas { max-width: 100%; height: auto; }
  .container, header, main, footer, #app { max-width: 100vw; }
</style>
<link rel="stylesheet" href="/index.css">

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=YOUR_ADSENSE_CLIENT" crossorigin="anonymous"></script>

<link rel="canonical" href="https://ksj-2.github.io/pungsu-checker/">
<meta name="robots" content="index,follow">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "ìš°ë¦¬ì§‘ í’ìˆ˜ ì§„ë‹¨",
  "url": "https://ksj-2.github.io/pungsu-checker/",
  "applicationCategory": "LifestyleApplication",
  "operatingSystem": "Web",
  "description": "AI ì…€í”„ í’ìˆ˜ ì§„ë‹¨ìœ¼ë¡œ ì§‘í„°/ëª…ë‹¹/ì´ì‚¬ë°©í–¥ì„ ë¬´ë£Œ ë¶„ì„.",
  "offers": { "@type": "Offer", "price": "0", "priceCurrency": "KRW" }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "í’ìˆ˜ ì ìˆ˜ëŠ” ì–´ë–»ê²Œ ê³„ì‚°í•˜ë‚˜ìš”?",
      "acceptedAnswer": { "@type": "Answer", "text": "ê±°ì‹¤ ë°©í–¥, ì±„ê´‘, ì£¼ë³€ ì§€í˜•Â·ì‹œì„¤ ë“±ì˜ í•­ëª©ì„ ê°€ì¤‘ì¹˜ë¡œ ë°˜ì˜í•´ 0~100ì ìœ¼ë¡œ ì‚°ì¶œí•©ë‹ˆë‹¤." }
    },
    {
      "@type": "Question",
      "name": "ì •í™•ë„ë¥¼ ë†’ì´ë ¤ë©´?",
      "acceptedAnswer": { "@type": "Answer", "text": "ì£¼ì†Œë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ì…ë ¥í•˜ê³ , ê±°ì‹¤ ë°©í–¥Â·ì¡°ë§ ì •ë³´ë¥¼ ì •í™•íˆ ì„ íƒí•˜ì„¸ìš”. ì¶”ê°€ë¡œ ì‹¤ì œ ê±°ì£¼ í™˜ê²½ì˜ íŠ¹ì´ì‚¬í•­ì„ ë°˜ì˜í•˜ë©´ ë¶„ì„ í’ˆì§ˆì´ ì˜¬ë¼ê°‘ë‹ˆë‹¤." }
    },
    {
      "@type": "Question",
      "name": "ê²°ê³¼ëŠ” ì‹¤ì œ ì´ì‚¬/êµ¬ë§¤ ì˜ì‚¬ê²°ì •ì„ ëŒ€ì²´í•˜ë‚˜ìš”?",
      "acceptedAnswer": { "@type": "Answer", "text": "ë³¸ í‰ê°€ëŠ” ì°¸ê³ ìš© ê°€ì´ë“œë¡œ ë²•ì Â·ì¬ë¬´ì  íŒë‹¨ì„ ëŒ€ì²´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í˜„ì¥ ì‹¤ì¸¡ê³¼ ì „ë¬¸ê°€ ìƒë‹´ì„ ê¶Œì¥í•©ë‹ˆë‹¤." }
    }
  ]
}
</script>

</head>
<body class="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-slate-200">

    <!-- App Root -->
    <div id="app">
        <!-- í—¤ë” -->
        <header class="w-full max-w-5xl mx-auto px-3 sm:px-4 py-6 sm:py-8 text-center">
            <div class="flex justify-center items-center gap-2 sm:gap-4 mb-2">
                <i data-lucide="mountain" class="w-8 h-8 sm:w-12 sm:h-12 text-emerald-400"></i>
                <h1 class="text-2xl sm:text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400">
                    ìš°ë¦¬ì§‘ í’ìˆ˜ ì§„ë‹¨
                </h1>
                <i data-lucide="waves" class="w-8 h-8 sm:w-12 sm:h-12 text-cyan-400"></i>
            </div>
            <p class="text-sm sm:text-lg text-slate-400">
                150ë…„ ì „í†µ í’ìˆ˜ ì´ë¡  + ì¹´ì¹´ì˜¤ë§µ ì‹¤ì œ ë°ì´í„°
            </p>
        </header>

        <main class="w-full max-w-5xl mx-auto px-3 sm:px-4 pb-16">
            <!-- ë°©í–¥ ê°€ì´ë“œ ëª¨ë‹¬ (Initially hidden) -->
            <div id="direction-guide-modal" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-3 sm:p-4">
                <div class="bg-slate-800 rounded-lg max-w-2xl w-full max-h-[85vh] sm:max-h-[90vh] overflow-y-auto border border-slate-700">
                    <div class="sticky top-0 bg-slate-800 p-3 sm:p-4 border-b border-slate-700 flex justify-between items-center">
                        <h3 class="text-lg sm:text-xl font-bold text-emerald-400 flex items-center gap-2">
                            <i data-lucide="compass" class="w-5 h-5 sm:w-6 sm:h-6"></i>
                            <span class="text-base sm:text-xl">ê±°ì‹¤ ë°©í–¥ í™•ì¸í•˜ëŠ” ë²•</span>
                        </h3>
                        <button onclick="toggleDirectionGuide(false)" class="text-slate-400 hover:text-white p-2">
                            <i data-lucide="x" class="w-5 h-5 sm:w-6 sm:h-6"></i>
                        </button>
                    </div>
                    
                    <div class="p-4 sm:p-6 space-y-4 sm:space-y-6">
                        <div class="bg-blue-900/20 p-3 sm:p-4 rounded-lg border border-blue-400/30">
                            <h4 class="font-semibold text-blue-300 mb-2 sm:mb-3 flex items-center gap-2 text-sm sm:text-base">
                                ğŸ“± ë°©ë²• 1: ìŠ¤ë§ˆíŠ¸í° ë‚˜ì¹¨ë°˜ (ê°€ì¥ ì •í™•!)
                            </h4>
                            <ol class="text-xs sm:text-sm text-slate-300 space-y-1.5 sm:space-y-2 list-decimal list-inside">
                                <li>ê±°ì‹¤ ì°½ë¬¸ ì•ì— ì„œì„¸ìš”</li>
                                <li>ìŠ¤ë§ˆíŠ¸í° "ë‚˜ì¹¨ë°˜" ì•±ì„ ì‹¤í–‰í•˜ì„¸ìš”
                                    <p class="ml-4 sm:ml-6 text-xs text-slate-400 mt-1">
                                    â€¢ ì•„ì´í°: ê¸°ë³¸ íƒ‘ì¬<br/>
                                    â€¢ ì•ˆë“œë¡œì´ë“œ: í”Œë ˆì´ìŠ¤í† ì–´ì—ì„œ "ë‚˜ì¹¨ë°˜" ê²€ìƒ‰
                                    </p>
                                </li>
                                <li>ì°½ë¬¸ ë°–ì„ í–¥í•´ í°ì„ ë“¤ì–´ë³´ì„¸ìš”</li>
                                <li>í‘œì‹œëœ ë°©í–¥ì„ í™•ì¸í•˜ì„¸ìš” (N=ë¶, E=ë™, S=ë‚¨, W=ì„œ)</li>
                            </ol>
                        </div>
                        <div class="bg-yellow-900/20 p-3 sm:p-4 rounded-lg border border-yellow-400/30">
                            <h4 class="font-semibold text-yellow-300 mb-2 sm:mb-3 flex items-center gap-2 text-sm sm:text-base">
                                â˜€ï¸ ë°©ë²• 2: í–‡ë¹›ìœ¼ë¡œ íŒë‹¨
                            </h4>
                            <div class="text-xs sm:text-sm text-slate-300 space-y-1.5 sm:space-y-2">
                                <p>ë‚® 12ì‹œ~2ì‹œì— ê±°ì‹¤ì—ì„œ:</p>
                                <ul class="space-y-1 ml-3 sm:ml-4">
                                    <li>â˜€ï¸ ì°½ë¬¸ìœ¼ë¡œ í•´ê°€ ì •ë©´ì— ë³´ì„ â†’ <strong class="text-yellow-300">ë‚¨í–¥</strong></li>
                                    <li>â˜€ï¸ ì™¼ìª½ì—ì„œ í–‡ë¹›ì´ ë“¤ì–´ì˜´ â†’ <strong class="text-yellow-300">ë™í–¥</strong></li>
                                    <li>â˜€ï¸ ì˜¤ë¥¸ìª½ì—ì„œ í–‡ë¹›ì´ ë“¤ì–´ì˜´ â†’ <strong class="text-yellow-300">ì„œí–¥</strong></li>
                                    <li>ğŸŒ™ í–‡ë¹›ì´ ê±°ì˜ ì•ˆ ë“¤ì–´ì˜´ â†’ <strong class="text-yellow-300">ë¶í–¥</strong></li>
                                </ul>
                            </div>
                        </div>
                        <div class="bg-slate-700/50 p-3 sm:p-4 rounded-lg border border-slate-600">
                            <h4 class="font-semibold text-slate-300 mb-2 sm:mb-3 text-sm sm:text-base">
                                ğŸ’¡ ì°¸ê³ : ë‚¨í–¥ì´ ì™œ ì¢‹ì„ê¹Œìš”?
                            </h4>
                            <p class="text-xs sm:text-sm text-slate-400 leading-relaxed">
                                í•œêµ­ì€ ë¶ë°˜êµ¬ì— ìœ„ì¹˜í•´ ìˆì–´, ë‚¨ìª½ì—ì„œ í–‡ë¹›ì´ ê°€ì¥ ë§ì´ ë“¤ì–´ì˜µë‹ˆë‹¤. 
                                ë‚¨í–¥ ì§‘ì€ ê²¨ìš¸ì—ë„ ë”°ëœ»í•˜ê³ , ì—¬ë¦„ì—ëŠ” í•´ê°€ ë†’ì´ ë– ì„œ ëœ ë¥ìŠµë‹ˆë‹¤. 
                                í’ìˆ˜ì—ì„œëŠ” í–‡ë¹› = ì–‘ì˜ ê¸°ìš´ = ìƒëª…ë ¥ìœ¼ë¡œ ë´…ë‹ˆë‹¤.
                            </p>
                        </div>
                        <button
                            onclick="toggleDirectionGuide(false)"
                            class="w-full py-3 sm:py-3.5 bg-emerald-600 hover:bg-emerald-700 text-white font-semibold rounded-md transition-colors text-sm sm:text-base"
                        >
                            í™•ì¸í–ˆì–´ìš”
                        </button>
                    </div>
                </div>
            </div>

            <!-- ì…ë ¥ í¼ ì„¹ì…˜ -->
            <section id="form-section">
                <form id="main-form" class="bg-slate-800/50 p-4 sm:p-6 rounded-lg shadow-lg border border-slate-700 space-y-4 sm:space-y-5">
                    <!-- ì£¼ì†Œ -->
                    <div>
                        <label class="block text-xs sm:text-sm font-semibold mb-2 text-slate-300">ì£¼ì†Œ</label>
                        <div class="relative">
                            <i data-lucide="map-pin" class="absolute left-3 sm:left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4 sm:w-5 sm:h-5"></i>
                            <input
                                id="address-input"
                                type="text"
                                placeholder="ì˜ˆ) ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ì„¸ì¢…ëŒ€ë¡œ 209"
                                class="w-full pl-10 sm:pl-12 pr-3 sm:pr-4 py-3 sm:py-3.5 bg-slate-900 border border-slate-600 rounded-md focus:ring-2 focus:ring-emerald-400 focus:outline-none text-sm sm:text-base"
                            />
                        </div>
                    </div>

                    <!-- ì¸µìˆ˜ & ê±´ë¬¼ ìœ í˜• -->
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
                        <div>
                            <label class="block text-xs sm:text-sm font-semibold mb-2 text-slate-300">ì¸µìˆ˜</label>
                            <input
                                id="floor-input"
                                type="number"
                                placeholder="ì˜ˆ) 7ì¸µ"
                                min="1"
                                max="100"
                                class="w-full px-3 sm:px-4 py-3 sm:py-3.5 bg-slate-900 border border-slate-600 rounded-md focus:ring-2 focus:ring-emerald-400 focus:outline-none text-sm sm:text-base"
                            />
                        </div>
                        <div>
                            <label class="block text-xs sm:text-sm font-semibold mb-2 text-slate-300">ê±´ë¬¼ ìœ í˜•</label>
                            <select id="building-type-select" class="w-full px-3 sm:px-4 py-3 sm:py-3.5 bg-slate-900 border border-slate-600 rounded-md focus:ring-2 focus:ring-emerald-400 focus:outline-none text-sm sm:text-base">
                                <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="ì•„íŒŒíŠ¸">ì•„íŒŒíŠ¸</option>
                                <option value="ì˜¤í”¼ìŠ¤í…”">ì˜¤í”¼ìŠ¤í…”</option>
                                <option value="ë¹Œë¼/ë‹¤ì„¸ëŒ€">ë¹Œë¼/ë‹¤ì„¸ëŒ€</option>
                                <option value="ë‹¨ë…ì£¼íƒ">ë‹¨ë…ì£¼íƒ</option>
                            </select>
                        </div>
                    </div>

                    <!-- ë°©í–¥ ì„ íƒ -->
                    <div>
                        <div class="flex items-center justify-between mb-2">
                            <label class="text-xs sm:text-sm font-semibold text-slate-300">ê±°ì‹¤ ë°©í–¥</label>
                            <button type="button" onclick="toggleDirectionGuide(true)" class="flex items-center gap-1 text-xs text-emerald-400 hover:text-emerald-300 py-1.5 px-2">
                                <i data-lucide="help-circle" class="w-3.5 h-3.5 sm:w-4 sm:h-4"></i>
                                <span class="hidden sm:inline">ë°©í–¥ í™•ì¸ë²•</span>
                                <span class="sm:hidden">í™•ì¸ë²•</span>
                            </button>
                        </div>
                        <div id="direction-options" class="space-y-2">
                           <!-- JS will populate this -->
                        </div>
                    </div>

                    <!-- ê±°ì‹¤ ì¡°ë§ -->
                    <div>
                        <div class="flex justify-between items-center mb-2">
                            <label class="block text-xs sm:text-sm font-semibold text-slate-300">
                                ê±°ì‹¤ ì°½ë¬¸ì—ì„œ ë³´ì´ëŠ” ê²ƒ (ë‹¤ì¤‘ ì„ íƒ)
                            </label>
                            <button type="button" id="balcony-tip-toggle" class="flex items-center gap-1 text-xs text-cyan-400 hover:text-cyan-300">
                                <i data-lucide="sparkles" class="w-3.5 h-3.5 sm:w-4 sm:h-4"></i>
                                <span>í’ìˆ˜ Tip</span>
                            </button>
                        </div>
                         <div id="balcony-tip-content" class="hidden bg-cyan-900/20 p-3 rounded-md border border-cyan-400/30 mb-3 text-xs text-cyan-200/80 space-y-2">
                            <p class="font-bold text-cyan-300">ğŸ’¡ ì™œ ê±°ì‹¤ ê¸°ì¤€ì¸ê°€ìš”?</p>
                            <ul class="list-disc list-inside space-y-1">
                                <li>ê±°ì‹¤ì€ ì§‘ì˜ ì¤‘ì‹¬ì´ì, ê¸°ìš´ì´ ê°€ì¥ ë§ì´ ë“œë‚˜ë“œëŠ” ê³³ì…ë‹ˆë‹¤.</li>
                                <li>ê°€ì¡± ëª¨ë‘ì˜ ìš´ì— ì˜í–¥ì„ ë¯¸ì¹˜ë¯€ë¡œ í’ìˆ˜ì—ì„œ ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ë´…ë‹ˆë‹¤.</li>
                            </ul>
                        </div>
                        <p class="text-xs text-slate-400 mb-2 sm:mb-3">ê°€ì¥ í° ì°½ë¬¸ ê¸°ì¤€</p>
                        <div id="balcony-view-options" class="grid grid-cols-2 sm:grid-cols-3 gap-2">
                             <!-- JS will populate this -->
                        </div>
                    </div>
                    
                    <!-- ê°• ëª¨ì–‘ ì¡°ê±´ë¶€ ì§ˆë¬¸ -->
                    <div id="river-shape-section" class="hidden">
                        <label class="block text-xs sm:text-sm font-semibold mb-2 text-slate-300">
                           ğŸŒŠ ê°•/í•˜ì²œì´ ì§‘ì„ ì–´ë–»ê²Œ ê°ì‹¸ë‚˜ìš”?
                        </label>
                        <div id="river-shape-options" class="space-y-2">
                            <!-- JS will populate this -->
                        </div>
                    </div>

                    <!-- í–‡ë¹› ì‹œê°„ -->
                     <div>
                        <label class="block text-xs sm:text-sm font-semibold mb-2 text-slate-300">
                            í•˜ë£¨ í–‡ë¹› ì‹œê°„
                        </label>
                        <div id="sunlight-options" class="space-y-2">
                             <!-- JS will populate this -->
                        </div>
                    </div>

                    <!-- ì§‘ì˜ ìœ„ì¹˜ -->
                    <div>
                        <label class="block text-xs sm:text-sm font-semibold mb-2 text-slate-300">
                            ì§‘ì˜ ìœ„ì¹˜
                        </label>
                        <div id="alley-options" class="space-y-2">
                            <!-- JS will populate this -->
                        </div>
                    </div>

                    <!-- ì§€í˜• íŠ¹ì„± -->
                     <div>
                        <label class="block text-xs sm:text-sm font-semibold mb-2 text-slate-300">
                            ì§‘í„° ì§€í˜• (ë‹¤ì¤‘ ì„ íƒ)
                        </label>
                        <div id="terrain-options" class="grid grid-cols-2 sm:grid-cols-4 gap-2">
                            <!-- JS will populate this -->
                        </div>
                    </div>

                    <!-- ë² ë€ë‹¤ í™•ì¥ -->
                    <div>
                        <label class="block text-xs sm:text-sm font-semibold mb-2 text-slate-300">
                            ë² ë€ë‹¤ í™•ì¥ ì—¬ë¶€
                        </label>
                        <div id="balcony-expanded-options" class="grid grid-cols-2 gap-2 sm:gap-4">
                            <!-- JS will populate this -->
                        </div>
                    </div>

                    <button
                        type="button"
                        onclick="handleAnalyze()"
                        class="w-full py-4 sm:py-4.5 bg-gradient-to-r from-emerald-500 to-cyan-500 text-white font-bold rounded-md hover:opacity-90 active:scale-98 transition-all text-base sm:text-lg shadow-lg"
                    >
                        í’ìˆ˜ ê°ì • ì‹œì‘
                    </button>

                    <p id="error-message" class="hidden text-red-400 text-center text-sm sm:text-base"></p>
                </form>

                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1819982598567420"
     crossorigin="anonymous"></script>
<!-- ë””ìŠ¤í”Œë ˆì´,ë°˜ì‘í˜•,ìµœìƒë‹¨ ê³ ì • ê´‘ê³  -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1819982598567420"
     data-ad-slot="3450469461"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
            </section>
            
            <!-- ë¡œë”© ì„¹ì…˜ -->
             <section id="loading-section" class="hidden">
                <div class="mt-6 sm:mt-8 p-5 sm:p-6 bg-slate-800 rounded-lg border border-slate-700">
                    <h3 class="text-lg sm:text-xl font-semibold text-center text-emerald-400 mb-5 sm:mb-6">AI ì •ë°€ ë¶„ì„ ì¤‘</h3>
                    <div class="flex items-center justify-center gap-3">
                        <i data-lucide="loader-2" class="w-5 h-5 sm:w-6 sm:h-6 text-emerald-400 animate-spin"></i>
                        <span id="loading-step" class="text-slate-300 text-sm sm:text-base"></span>
                    </div>
                </div>
            </section>

            <!-- ê²°ê³¼ ì„¹ì…˜ -->
            <section id="result-section" class="hidden">
                <div class="space-y-6 sm:space-y-8">
                    <!-- ì ìˆ˜ ì¹´ë“œ -->
                    <div class="bg-slate-800 p-5 sm:p-8 rounded-lg border border-slate-700">
                        <p id="result-address" class="text-center text-slate-400 mb-3 sm:mb-4 text-xs sm:text-sm"></p>
                        <p id="result-details" class="text-center text-slate-400 mb-4 sm:mb-6 text-xs sm:text-sm"></p>
                        <div class="flex flex-col sm:flex-row items-center justify-center gap-6 sm:gap-10">
                            <div class="scale-90 sm:scale-100">
                                <div class="relative w-48 h-48">
                                    <svg class="w-full h-full" viewBox="0 0 120 120">
                                      <circle class="text-slate-700" stroke-width="10" stroke="currentColor" fill="transparent" r="52" cx="60" cy="60" />
                                      <circle
                                        id="score-gauge-circle"
                                        class="transform -rotate-90 origin-center transition-all duration-1000"
                                        style="transition-property: stroke-dashoffset;"
                                        stroke-width="10"
                                        stroke-dasharray="326.72"
                                        stroke-dashoffset="326.72"
                                        stroke-linecap="round"
                                        stroke="currentColor"
                                        fill="transparent"
                                        r="52"
                                        cx="60"
                                        cy="60"
                                      />
                                    </svg>
                                    <div id="score-gauge-text" class="absolute inset-0 flex flex-col items-center justify-center">
                                      <span class="text-5xl font-bold">0</span>
                                      <span class="text-lg">ì </span>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center sm:text-left">
                                <div id="result-emoji" class="text-5xl sm:text-6xl mb-2"></div>
                                <h2 id="result-grade" class="text-2xl sm:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400"></h2>
                                <div id="result-nearby" class="mt-3 sm:mt-4 text-xs sm:text-sm text-slate-400 space-y-1"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ê³µìœ í•˜ê¸° ì„¹ì…˜ -->
                    <div class="bg-gradient-to-r from-emerald-900/20 to-cyan-900/20 p-4 sm:p-6 rounded-lg border border-emerald-700/30">
                         <div class="flex items-center justify-center gap-2 mb-3 sm:mb-4">
                            <i data-lucide="share-2" class="w-5 h-5 sm:w-6 sm:h-6 text-emerald-400"></i>
                            <h3 class="text-lg sm:text-xl font-semibold text-slate-200">ê²°ê³¼ ê³µìœ í•˜ê¸°</h3>
                        </div>
                        <p class="text-center text-slate-400 text-xs sm:text-sm mb-4">ì¹œêµ¬ë“¤ì—ê²Œë„ ìš°ë¦¬ì§‘ í’ìˆ˜ ì§„ë‹¨ì„ ì•Œë ¤ì£¼ì„¸ìš”!</p>
                        <div class="grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3">
                            <button onclick="shareToKakao()" class="flex flex-col items-center gap-2 p-3 sm:p-4 bg-[#FEE500] hover:bg-[#FDD835] text-[#3C1E1E] rounded-lg transition-all active:scale-95">
                                <i data-lucide="message-circle" class="w-6 h-6 sm:w-7 sm:h-7"></i>
                                <span class="text-xs sm:text-sm font-semibold">ì¹´ì¹´ì˜¤í†¡</span>
                            </button>
                            <button onclick="shareToFacebook()" class="flex flex-col items-center gap-2 p-3 sm:p-4 bg-[#1877F2] hover:bg-[#0C63D4] text-white rounded-lg transition-all active:scale-95">
                                <i data-lucide="facebook" class="w-6 h-6 sm:w-7 sm:h-7"></i>
                                <span class="text-xs sm:text-sm font-semibold">í˜ì´ìŠ¤ë¶</span>
                            </button>
                            <button onclick="shareToTwitter()" class="flex flex-col items-center gap-2 p-3 sm:p-4 bg-[#1DA1F2] hover:bg-[#0C8BD9] text-white rounded-lg transition-all active:scale-95">
                                <i data-lucide="twitter" class="w-6 h-6 sm:w-7 sm:h-7"></i>
                                <span class="text-xs sm:text-sm font-semibold">íŠ¸ìœ„í„°</span>
                            </button>
                            <button id="copy-link-btn" onclick="copyLink()" class="flex flex-col items-center gap-2 p-3 sm:p-4 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-all active:scale-95">
                                <div id="copy-link-default">
                                    <div class="flex flex-col items-center gap-2">
                                        <i data-lucide="link-2" class="w-6 h-6 sm:w-7 sm:h-7"></i>
                                        <span class="text-xs sm:text-sm font-semibold">ë§í¬ë³µì‚¬</span>
                                    </div>
                                </div>
                                <div id="copy-link-success" class="hidden">
                                    <div class="flex flex-col items-center gap-2 text-emerald-400">
                                        <i data-lucide="check" class="w-6 h-6 sm:w-7 sm:h-7"></i>
                                        <span class="text-xs sm:text-sm font-semibold">ë³µì‚¬ë¨!</span>
                                    </div>
                                </div>
                            </button>
                        </div>
                    </div>

                    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1819982598567420"
     crossorigin="anonymous"></script>
<!-- ë””ìŠ¤í”Œë ˆì´,ìˆ˜í‰,ë°˜ì‘í˜•,ì¤‘ê°„ ê´‘ê³  -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1819982598567420"
     data-ad-slot="4103740429"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

                    <div id="positive-section" class="hidden">
                        <h3 class="text-xl sm:text-2xl font-semibold mb-3 sm:mb-4 text-slate-200 flex items-center gap-2">
                            <i data-lucide="check-circle" class="w-5 h-5 sm:w-6 sm:h-6 text-emerald-400"></i>
                            ì´ ì§‘ì˜ ì¢‹ì€ ì 
                        </h3>
                        <div id="positive-items-container" class="space-y-2.5 sm:space-y-3"></div>
                    </div>

                    <div id="negative-section" class="hidden">
                        <h3 class="text-xl sm:text-2xl font-semibold mb-3 sm:mb-4 text-slate-200 flex items-center gap-2">
                            <i data-lucide="alert-triangle" class="w-5 h-5 sm:w-6 sm:h-6 text-red-400"></i>
                            ì£¼ì˜í•  ì 
                        </h3>
                        <div id="negative-items-container" class="space-y-2.5 sm:space-y-3"></div>
                    </div>
                    
                    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1819982598567420"
     crossorigin="anonymous"></script>
<!-- ë””ìŠ¤í”Œë ˆì´,ìˆ˜í‰,ë°˜ì‘í˜•,ì¤‘ê°„ ê´‘ê³  -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1819982598567420"
     data-ad-slot="4103740429"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

                    <div id="solutions-section" class="hidden">
                        <h3 class="text-xl sm:text-2xl font-semibold mb-3 sm:mb-4 text-slate-200 flex items-center gap-2">
                            <i data-lucide="shield-alert" class="w-5 h-5 sm:w-6 sm:h-6 text-yellow-400"></i>
                            ê¸°ìš´ì„ ë³´ê°•í•˜ëŠ” ë¹„ë³´ì±…
                        </h3>
                        <div id="solutions-container" class="space-y-3 sm:space-y-4"></div>
                    </div>

                    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1819982598567420"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-1819982598567420"
     data-ad-slot="9447953480"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

                    <div class="text-center">
                        <button onclick="resetApp()" class="w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-3.5 bg-gradient-to-r from-slate-600 to-slate-700 text-white font-bold rounded-md hover:opacity-90 active:scale-98 transition-all text-sm sm:text-base">
                            ë‹¤ë¥¸ ì£¼ì†Œë¡œ ìƒˆë¡œ ë¶„ì„í•˜ê¸°
                        </button>
                    </div>
                </div>
            </section>
        </main>

        <footer class="w-full max-w-5xl mx-auto px-3 sm:px-4 py-6 sm:py-8 text-center text-slate-500 text-xs sm:text-sm border-t border-slate-800">
            <p>Â© 2025 ìš°ë¦¬ì§‘ í’ìˆ˜ ì§„ë‹¨. ì¹´ì¹´ì˜¤ë§µ ê¸°ë°˜ ì‹¤ì œ ë°ì´í„° ë¶„ì„</p>
        </footer>
    </div>
    
    <script>
        // =================================================================
        // SCRIPT SECTION
        // This script uses vanilla JavaScript for a static HTML page.
        // =================================================================
        
        // --- KAKAO SHARING SETUP ---
        const KAKAO_JS_KEY = 'f90959efbc49398f80378e190c64ab18';

        (function() {
            const script = document.createElement('script');
            script.src = 'https://developers.kakao.com/sdk/js/kakao.js';
            script.async = true;
            script.onload = () => {
                if (window.Kakao && !window.Kakao.isInitialized() && KAKAO_JS_KEY !== 'YOUR_KAKAO_JAVASCRIPT_KEY') {
                    try { window.Kakao.init(KAKAO_JS_KEY); } catch(e) { console.error("Kakao SDK initialization failed:", e); }
                }
            };
            document.head.appendChild(script);
        })();

        // --- STATE MANAGEMENT ---
        let formData = {
            address: '', floor: '', direction: '', buildingType: '',
            balconyView: [], riverShape: '', sunlightHours: '', alleyPosition: '',
            terrain: [], balconyExpanded: ''
        };
        let appState = {
            loading: false, result: null, error: '', loadingStep: '', showDirectionGuide: false
        };

        // --- DOM ELEMENT REFERENCES ---
        const DOMElements = {
            formSection: document.getElementById('form-section'),
            mainForm: document.getElementById('main-form'),
            loadingSection: document.getElementById('loading-section'),
            resultSection: document.getElementById('result-section'),
            errorMessage: document.getElementById('error-message'),
            loadingStep: document.getElementById('loading-step'),
            directionGuideModal: document.getElementById('direction-guide-modal'),
            addressInput: document.getElementById('address-input'),
            floorInput: document.getElementById('floor-input'),
            buildingTypeSelect: document.getElementById('building-type-select'),
            balconyTipToggle: document.getElementById('balcony-tip-toggle'),
            balconyTipContent: document.getElementById('balcony-tip-content'),
            riverShapeSection: document.getElementById('river-shape-section'),
        };

        // --- FORM OPTIONS ---
        const FORM_OPTIONS = {
            directions: [
                { value: 'ë‚¨í–¥', label: 'ë‚¨í–¥ (ë‚® 12-2ì‹œì— í•´ê°€ ì •ë©´)' },
                { value: 'ë™í–¥', label: 'ë™í–¥ (ì•„ì¹¨ 7-9ì‹œì— í•´ê°€ ì •ë©´)' },
                { value: 'ì„œí–¥', label: 'ì„œí–¥ (ì˜¤í›„ 4-6ì‹œì— í•´ê°€ ì •ë©´)' },
                { value: 'ë¶í–¥', label: 'ë¶í–¥ (í–‡ë¹› ê±°ì˜ ì•ˆ ë“¤ì–´ì˜´)' },
                { value: 'ì˜ëª¨ë¦„', label: 'ì˜ ëª¨ë¥´ê² ì–´ìš” (ë°©í–¥ ì ìˆ˜ ì œì™¸)' }
            ],
            viewOptions: ['ì‚°', 'ê°•/í•˜ì²œ', 'ê³µì›', 'ê±´ë¬¼', 'ë„ë¡œ', 'ì•„ë¬´ê²ƒë„ ì•ˆë³´ì„'],
            sunlightOptions: [
                { value: 'ê±°ì˜ì—†ìŒ', label: 'ê±°ì˜ ì—†ìŒ (1ì‹œê°„ ë¯¸ë§Œ)' },
                { value: '1-2ì‹œê°„', label: '1-2ì‹œê°„' },
                { value: '3ì‹œê°„ì´ìƒ', label: '3ì‹œê°„ ì´ìƒ (ì´ìƒì !)' }
            ],
             alleyOptions: [
                { value: 'í°ê¸¸ê°€', label: 'í° ê¸¸ê°€', icon: '<svg viewBox="0 0 80 50" class="w-full h-12"><path d="M0 25 H80" stroke="#475569" stroke-width="4"/><path d="M32.5 30 h15 v20 h-15z M32.5 30 L40 22 L47.5 30" fill="#14B8A6" stroke="#14B8A6" stroke-width="2" stroke-linejoin="round"/></svg>' },
                { value: 'ê³¨ëª©ì¤‘ê°„', label: 'ê³¨ëª© ì¤‘ê°„', icon: '<svg viewBox="0 0 80 50" class="w-full h-12"><path d="M0 25 H80" stroke="#475569" stroke-width="4"/><path d="M32.5 30 h15 v20 h-15z M32.5 30 L40 22 L47.5 30" fill="#14B8A6" stroke="#14B8A6" stroke-width="2" stroke-linejoin="round"/><path d="M2.5 30 h15 v20 h-15z M2.5 30 L10 22 L17.5 30" fill="none" stroke="#64748B" stroke-width="2" stroke-linejoin="round"/><path d="M62.5 30 h15 v20 h-15z M62.5 30 L70 22 L77.5 30" fill="none" stroke="#64748B" stroke-width="2" stroke-linejoin="round"/></svg>' },
                { value: 'êµì°¨ë¡œëª¨í‰ì´', label: 'Tì/êµì°¨ë¡œ ëª¨í‰ì´', icon: '<svg viewBox="0 0 80 50" class="w-full h-12"><path d="M0 25 H80 M40 0 V50" stroke="#475569" stroke-width="4"/><path d="M52.5 30 h15 v20 h-15z M52.5 30 L60 22 L67.5 30" fill="#14B8A6" stroke="#14B8A6" stroke-width="2" stroke-linejoin="round"/></svg>' },
                { value: 'í°ê¸¸Tì', label: 'Tìí˜• ë„ë¡œ ë (ì •ë©´)', icon: '<svg viewBox="0 0 80 50" class="w-full h-12"><path d="M0 25 H80 M40 25 V50" stroke="#475569" stroke-width="4"/><path d="M32.5 0 h15 v20 h-15z M32.5 0 L40 -8 L47.5 0" fill="#F87171" stroke="#F87171" stroke-width="2" stroke-linejoin="round"/></svg>' },
                { value: 'yìí˜•ë„ë¡œ', label: 'Yìí˜• ë„ë¡œ (ê°€ìœ„ ì‚´)', icon: '<svg viewBox="0 0 80 50" class="w-full h-12"><path d="M40 50 V25 L10 0 M40 25 L70 0" stroke="#475569" stroke-width="4" /><path d="M32.5 10 h15 v20 h-15z M32.5 10 L40 2 L47.5 10" fill="#F87171" stroke="#F87171" stroke-width="2" stroke-linejoin="round"/></svg>'},
                { value: 'êµ½ì€ë„ë¡œë°”ê¹¥', label: 'êµ½ì€ ë„ë¡œ ë°”ê¹¥ìª½ (ë°˜ê¶ ì‚´)', icon: '<svg viewBox="0 0 80 50" class="w-full h-12"><path d="M0 50 C 40 -10, 40 -10, 80 50" stroke="#475569" stroke-width="4" fill="none"/><path d="M32.5 0 h15 v20 h-15z M32.5 0 L40 -8 L47.5 0" fill="#F87171" stroke="#F87171" stroke-width="2" stroke-linejoin="round"/></svg>'},
                { value: 'ë§‰ë‹¤ë¥¸ë', label: 'ë§‰ë‹¤ë¥¸ ê³¨ëª© ë', icon: '<svg viewBox="0 0 80 50" class="w-full h-12"><path d="M0 25 H60 M60 5 V45" stroke="#475569" stroke-width="4"/><path d="M12.5 30 h15 v20 h-15z M12.5 30 L20 22 L27.5 30" fill="#14B8A6" stroke="#14B8A6" stroke-width="2" stroke-linejoin="round"/></svg>' }
            ],
             riverShapeOptions: [
                { value: 'ê¶ìˆ˜', label: 'ì§‘ì„ ê°ì‹¸ëŠ” ëª¨ì–‘ (ê¶ìˆ˜)', icon: '<svg viewBox="0 0 80 50" class="w-full h-10"><path d="M0 0 C 40 60, 40 60, 80 0" stroke="#38BDF8" stroke-width="4" fill="none"/><path d="M32.5 30 h15 v20 h-15z M32.5 30 L40 22 L47.5 30" fill="#14B8A6" stroke="#14B8A6" stroke-width="2" stroke-linejoin="round"/></svg>' },
                { value: 'ë°˜ê¶ìˆ˜', label: 'ì§‘ì„ ë“±ì§€ëŠ” ëª¨ì–‘ (ë°˜ê¶ìˆ˜)', icon: '<svg viewBox="0 0 80 50" class="w-full h-10"><path d="M0 50 C 40 -10, 40 -10, 80 50" stroke="#38BDF8" stroke-width="4" fill="none"/><path d="M32.5 0 h15 v20 h-15z M32.5 0 L40 -8 L47.5 0" fill="#F87171" stroke="#F87171" stroke-width="2" stroke-linejoin="round"/></svg>' }
            ],
            terrainOptions: ['í‰ì§€', 'ë¹„íƒˆ', 'ê³¨ì§œê¸°', 'ì–¸ë•'],
            balconyExpandedOptions: [ { value: 'ì˜ˆ' }, { value: 'ì•„ë‹ˆì˜¤' } ]
        };

        // --- UI RENDERING & EVENT HANDLERS ---
        function renderFormOptions() {
            const createRadio = (name, opt, container) => {
                 const label = document.createElement('label');
                 label.className = `flex items-center gap-3 p-3 rounded-md border cursor-pointer transition-colors active:scale-98 bg-slate-900 border-slate-600 hover:border-slate-500`;
                 label.innerHTML = `
                    <input type="radio" name="${name}" value="${opt.value}" onchange="updateFormState()" class="w-5 h-5 flex-shrink-0 text-emerald-500 bg-slate-700 border-slate-500 focus:ring-emerald-500">
                    <div class="flex-grow">${opt.icon || ''}</div>
                    <span class="text-xs sm:text-sm text-slate-200 flex-grow text-right">${opt.label}</span>`;
                 container.appendChild(label);
            };
            const createRadioSimple = (name, opt, container) => {
                const label = document.createElement('label');
                label.className = `flex items-center gap-2.5 sm:gap-3 p-3 sm:p-3.5 rounded-md border cursor-pointer transition-colors active:scale-98 bg-slate-900 border-slate-600 hover:border-slate-500`;
                label.innerHTML = `<input type="radio" name="${name}" value="${opt.value}" onchange="updateFormState()" class="w-4 h-4 sm:w-5 sm:h-5 text-emerald-500 bg-slate-700 border-slate-500 focus:ring-emerald-500">
                                   <span class="text-xs sm:text-sm text-slate-200">${opt.label}</span>`;
                container.appendChild(label);
            };
            const createRadioCenter = (name, opt, container) => {
                 const label = document.createElement('label');
                label.className = `flex items-center justify-center gap-2 p-3 sm:p-3.5 rounded-md border cursor-pointer transition-colors active:scale-95 bg-slate-900 border-slate-600 hover:border-slate-500`;
                label.innerHTML = `<input type="radio" name="${name}" value="${opt.value}" onchange="updateFormState()" class="w-4 h-4 sm:w-5 sm:h-5 text-emerald-500 bg-slate-700 border-slate-500 focus:ring-emerald-500">
                                   <span class="text-xs sm:text-sm text-slate-200">${opt.value}</span>`;
                container.appendChild(label);
            };
            const createButton = (field, value, container) => {
                const button = document.createElement('button');
                button.type = 'button';
                button.textContent = value;
                button.className = 'px-3 sm:px-4 py-2.5 sm:py-3 rounded-md border transition-colors text-xs sm:text-sm active:scale-95 bg-slate-900 border-slate-600 hover:border-emerald-400';
                button.onclick = () => toggleMultiSelect(field, button, value);
                container.appendChild(button);
            };
            
            FORM_OPTIONS.directions.forEach(opt => createRadioSimple('direction', opt, document.getElementById('direction-options')));
            FORM_OPTIONS.viewOptions.forEach(val => createButton('balconyView', val, document.getElementById('balcony-view-options')));
            FORM_OPTIONS.sunlightOptions.forEach(opt => createRadioSimple('sunlightHours', opt, document.getElementById('sunlight-options')));
            FORM_OPTIONS.alleyOptions.forEach(opt => createRadio('alleyPosition', opt, document.getElementById('alley-options')));
            FORM_OPTIONS.riverShapeOptions.forEach(opt => createRadio('riverShape', opt, document.getElementById('river-shape-options')));
            FORM_OPTIONS.terrainOptions.forEach(val => createButton('terrain', val, document.getElementById('terrain-options')));
            FORM_OPTIONS.balconyExpandedOptions.forEach(opt => createRadioCenter('balconyExpanded', opt, document.getElementById('balcony-expanded-options')));
        }

        function updateFormState() {
            formData.address = DOMElements.addressInput.value;
            formData.floor = DOMElements.floorInput.value;
            formData.buildingType = DOMElements.buildingTypeSelect.value;
            
            const getRadioVal = name => document.querySelector(`input[name="${name}"]:checked`)?.value || '';
            formData.direction = getRadioVal('direction');
            formData.sunlightHours = getRadioVal('sunlightHours');
            formData.alleyPosition = getRadioVal('alleyPosition');
            formData.riverShape = getRadioVal('riverShape');
            formData.balconyExpanded = getRadioVal('balconyExpanded');

            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                const label = radio.closest('label');
                if (!label) return;
                const isChecked = radio.checked;
                label.classList.toggle('bg-emerald-900/30', isChecked);
                label.classList.toggle('border-emerald-500', isChecked);
                label.classList.toggle('bg-slate-900', !isChecked);
                label.classList.toggle('border-slate-600', !isChecked);
            });
        }
        
        function toggleMultiSelect(field, element, value) {
            const index = formData[field].indexOf(value);
            if (index > -1) {
                formData[field].splice(index, 1);
                element.classList.remove('bg-emerald-600', 'border-emerald-500', 'text-white');
            } else {
                formData[field].push(value);
                element.classList.add('bg-emerald-600', 'border-emerald-500', 'text-white');
            }
            if (field === 'balconyView' && value === 'ê°•/í•˜ì²œ') {
                const isSelected = formData.balconyView.includes('ê°•/í•˜ì²œ');
                DOMElements.riverShapeSection.classList.toggle('hidden', !isSelected);
                if (!isSelected) {
                    const riverRadio = document.querySelector('input[name="riverShape"]:checked');
                    if(riverRadio) riverRadio.checked = false;
                    formData.riverShape = '';
                    updateFormState();
                }
            }
        }
        
        function toggleDirectionGuide(show) {
            appState.showDirectionGuide = show;
            DOMElements.directionGuideModal.classList.toggle('hidden', !show);
        }

        function toggleExpand(buttonElement) {
            const content = buttonElement.nextElementSibling;
            const icon = buttonElement.querySelector('[data-lucide^="chevron"]');
            content.classList.toggle('hidden');
            icon.classList.toggle('rotate-180');
        }

        async function handleAnalyze() {
            updateFormState(); 
            if (!formData.address || !formData.floor || !formData.direction || !formData.buildingType || 
                !formData.sunlightHours || !formData.alleyPosition || !formData.balconyExpanded) {
                appState.error = 'ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                renderApp();
                return;
            }
            appState.error = '';
            appState.result = null;
            appState.loading = true;
            renderApp();

            try {
                const report = await realAnalyzeFengShui(formData, (step) => {
                    appState.loadingStep = step;
                    renderApp();
                });
                appState.result = report;
            } catch (e) {
                appState.error = e.message || 'ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
            } finally {
                appState.loading = false;
                renderApp();
                window.scrollTo(0, 0);
            }
        }

        function resetApp() {
            window.location.reload();
        }

        function shareToKakao() {
            const result = appState.result;
            if (!result) return;
            if (!window.Kakao || !window.Kakao.isInitialized()) {
                alert('ì¹´ì¹´ì˜¤í†¡ ê³µìœ  ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ì¹´ì¹´ì˜¤ JavaScript í‚¤ë¥¼ ì„¤ì •í•˜ê³  ì•±ì„ ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤.');
                return;
            }
            window.Kakao.Share.sendDefault({
                objectType: 'feed',
                content: {
                    title: 'ìš°ë¦¬ì§‘ í’ìˆ˜ ì§„ë‹¨ ê²°ê³¼',
                    description: `${result.address}ì˜ í’ìˆ˜ ì ìˆ˜ëŠ” ${result.totalScore}ì ! ${result.grade} ${result.emoji}`,
                    imageUrl: 'https://picsum.photos/seed/fengshui/800/400',
                    link: { mobileWebUrl: window.location.href, webUrl: window.location.href },
                },
                buttons: [{
                    title: 'ìš°ë¦¬ì§‘ë„ ì§„ë‹¨í•˜ê¸°',
                    link: { mobileWebUrl: window.location.origin, webUrl: window.location.origin },
                }],
            });
        }

        function shareToFacebook() {
            const url = encodeURIComponent(window.location.href);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank', 'width=600,height=400');
        }

        function shareToTwitter() {
            const result = appState.result;
            if (!result) return;
            const text = encodeURIComponent(`ìš°ë¦¬ì§‘ í’ìˆ˜ ì ìˆ˜ëŠ” ${result.totalScore}ì ! ${result.grade} ${result.emoji}\n`);
            const url = encodeURIComponent(window.location.href);
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank', 'width=600,height=400');
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                document.getElementById('copy-link-default').classList.add('hidden');
                document.getElementById('copy-link-success').classList.remove('hidden');
                setTimeout(() => {
                    document.getElementById('copy-link-default').classList.remove('hidden');
                    document.getElementById('copy-link-success').classList.add('hidden');
                }, 2000);
            }).catch(() => {
                alert('ë§í¬ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            });
        }
        
        // This function was missing. It controls the visibility of different sections.
        function renderApp() {
            DOMElements.formSection.classList.toggle('hidden', appState.loading || appState.result);
            DOMElements.loadingSection.classList.toggle('hidden', !appState.loading);
            DOMElements.resultSection.classList.toggle('hidden', !appState.result);

            if (appState.error) {
                DOMElements.errorMessage.textContent = appState.error;
                DOMElements.errorMessage.classList.remove('hidden');
            } else {
                DOMElements.errorMessage.classList.add('hidden');
            }

            if (appState.loading) {
                DOMElements.loadingStep.textContent = appState.loadingStep;
            }

            if (appState.result) {
                renderResultData(appState.result);
            }
        }
        
        function renderResultData(result) {
            document.getElementById('result-address').textContent = result.address;
            document.getElementById('result-details').textContent = `${result.formData.floor}ì¸µ ${result.formData.direction} ${result.formData.buildingType}`;
            document.getElementById('result-emoji').textContent = result.emoji;
            document.getElementById('result-grade').textContent = result.grade;
            
            const nearbyEl = document.getElementById('result-nearby');
            nearbyEl.innerHTML = `
                <p>ğŸ”ï¸ ì£¼ë³€ ì‚°: ${result.nearbyData.mountains}ê°œ</p>
                <p>ğŸ’§ ì£¼ë³€ ìˆ˜ê³„: ${result.nearbyData.rivers}ê°œ</p>
                <p>ğŸŒ³ ì£¼ë³€ ê³µì›: ${result.nearbyData.parks}ê°œ</p>
            `;

            renderScoreGauge(result.totalScore);
            renderAnalysisItems('positive', result.positiveItems);
            renderAnalysisItems('negative', result.negativeItems);
            renderSolutions(result.solutions);
        }

        function renderScoreGauge(score) {
            const circle = document.getElementById('score-gauge-circle');
            const textContainer = document.getElementById('score-gauge-text');
            const circumference = 2 * Math.PI * 52; 
            const offset = circumference - (score / 100) * circumference;

            let colorClass = 'text-emerald-400';
            if (score < 40) colorClass = 'text-red-400';
            else if (score < 60) colorClass = 'text-yellow-400';
            else if (score < 80) colorClass = 'text-cyan-400';
            
            setTimeout(() => {
                circle.style.strokeDashoffset = offset;
                circle.setAttribute('class', `transform -rotate-90 origin-center transition-all duration-1000 ${colorClass}`);
            }, 100);

            textContainer.setAttribute('class', `absolute inset-0 flex flex-col items-center justify-center ${colorClass}`);
            textContainer.innerHTML = `<span class="text-5xl font-bold">${score}</span><span class="text-lg">ì </span>`;
        }

        function renderAnalysisItems(type, items) {
            const containerId = `${type}-items-container`;
            const sectionId = `${type}-section`;
            const container = document.getElementById(containerId);
            const section = document.getElementById(sectionId);
            
            if (items.length === 0) {
                section.classList.add('hidden');
                return;
            }
            section.classList.remove('hidden');

            const isPositive = type === 'positive';
            const color = isPositive ? 'emerald' : 'red';
            const icon = isPositive ? 'arrow-up' : 'arrow-down';
            
            container.innerHTML = items.map((item, idx) => `
                <div class="bg-slate-800/50 p-3 sm:p-4 rounded-lg border border-${color}-900/30">
                    <button onclick="toggleExpand(this)" class="w-full flex items-start gap-3 sm:gap-4">
                        <div class="flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center bg-${color}-900/50 text-${color}-400">
                            <i data-lucide="${icon}" class="sm:w-6 sm:h-6" style="width: 18px; height: 18px;"></i>
                        </div>
                        <div class="flex-1 text-left">
                            <h4 class="font-semibold text-slate-100 text-sm sm:text-base">
                                ${item.title}
                                <span class="ml-2 text-xs sm:text-sm font-bold text-${color}-400">(${item.score > 0 ? '+' : ''}${item.score}ì )</span>
                            </h4>
                            <p class="text-slate-400 text-xs sm:text-sm mt-1">${item.description}</p>
                        </div>
                        <i data-lucide="chevron-down" class="text-${color}-400 w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0 transition-transform"></i>
                    </button>
                    <div class="hidden ml-11 sm:ml-14 mt-2 sm:mt-3 p-2.5 sm:p-3 bg-${color}-900/20 rounded-lg">
                        <p class="text-xs sm:text-sm text-${color}-200/80">${isPositive ? 'ğŸ’¡' : 'âš ï¸'} ${item.reason}</p>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }
        
        function renderSolutions(solutions) {
            const container = document.getElementById('solutions-container');
            const section = document.getElementById('solutions-section');
            if (solutions.length === 0) {
                section.classList.add('hidden');
                return;
            }
            section.classList.remove('hidden');

            container.innerHTML = solutions.map(sol => `
                <div class="bg-yellow-900/20 p-3 sm:p-4 rounded-lg border border-yellow-400/30">
                    <div class="flex items-start gap-3 sm:gap-4">
                        <i data-lucide="lightbulb" class="w-8 h-8 sm:w-10 sm:h-10 text-yellow-400 flex-shrink-0"></i>
                        <div>
                            <h4 class="font-semibold text-yellow-300 mb-1.5 sm:mb-2 text-sm sm:text-base">${sol.title}</h4>
                            <p class="text-yellow-200/80 text-xs sm:text-sm mb-1.5 sm:mb-2">${sol.description}</p>
                            <p class="text-yellow-200/60 text-xs italic">ğŸ’¡ ${sol.reason}</p>
                        </div>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        // --- REAL ANALYSIS LOGIC with Vercel Proxy ---
        async function realAnalyzeFengShui(formData, setLoadingStep) {
            const sleep = ms => new Promise(r => setTimeout(r, ms));
            const VERCEL_PROXY_URL = 'https://pungsu-backend.vercel.app';
            if (VERCEL_PROXY_URL === 'ì—¬ê¸°ì—_ë³µì‚¬í•œ_Vercel_ì£¼ì†Œë¥¼_ë¶™ì—¬ë„£ìœ¼ì„¸ìš”') {
                throw new Error('Vercel í”„ë¡ì‹œ ì£¼ì†Œê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. index.html íŒŒì¼ì„ ìˆ˜ì •í•´ì£¼ì„¸ìš”.');
            }

            setLoadingStep('ì£¼ì†Œë¥¼ ì¢Œí‘œë¡œ ë³€í™˜ ì¤‘...');
            let coords;
            try {
                const response = await fetch(`${VERCEL_PROXY_URL}/api/proxy?address=${encodeURIComponent(formData.address)}`);
                if (!response.ok) throw new Error(`ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜: ${response.status}`);
                const data = await response.json();
                if (data.documents && data.documents.length > 0) {
                    const { x, y } = data.documents[0];
                    coords = { lat: parseFloat(y), lng: parseFloat(x) };
                } else { throw new Error('ì£¼ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì¢€ ë” ìì„¸íˆ ì…ë ¥í•´ë³´ì„¸ìš”.'); }
            } catch (error) {
                console.error('Error fetching coordinates:', error);
                throw new Error(`ì£¼ì†Œ ë³€í™˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`);
            }
            await sleep(500);

            const searchNearby = async (keyword, radius) => {
                try {
                    const response = await fetch(`${VERCEL_PROXY_URL}/api/proxy?keyword=${encodeURIComponent(keyword)}&lat=${coords.lat}&lng=${coords.lng}&radius=${radius}`);
                    if (!response.ok) return 0;
                    const data = await response.json();
                    return data.documents?.length || 0;
                } catch (e) { console.error(`Error searching for ${keyword}:`, e); return 0; }
            };

            setLoadingStep('ì£¼ë³€ ì§€í˜• ë¶„ì„ ì¤‘...');
            const mountains = await searchNearby('ì‚°', 1000);
            const rivers = await searchNearby('ê°•', 1000);
            await sleep(500);
            setLoadingStep('ì£¼ë³€ í™˜ê²½ ë¶„ì„ ì¤‘...');
            const parks = await searchNearby('ê³µì›', 500);
            const towers = await searchNearby('ì†¡ì „íƒ‘', 200);
            const tunnels = await searchNearby('í„°ë„', 500);
            const cemeteries = await searchNearby('ë¬˜ì§€', 500);
            const hospitals = await searchNearby('ë³‘ì›', 300);
            await sleep(800);
            setLoadingStep('í’ìˆ˜ ì ìˆ˜ ê³„ì‚° ì¤‘...');
            let score = 70;
            const positiveItems = [], negativeItems = [], solutions = [];
            const floor = parseInt(formData.floor);
            const hasBalconyMountain = formData.balconyView.includes('ì‚°');
            const hasBalconyRiver = formData.balconyView.includes('ê°•/í•˜ì²œ');
            const hasBalconyBuilding = formData.balconyView.includes('ê±´ë¬¼');
            const hasBalconyRoad = formData.balconyView.includes('ë„ë¡œ');

            // --- SCORING LOGIC ---
            if (formData.riverShape === 'ê¶ìˆ˜') { score += 15; positiveItems.push({ title: 'ê¸ˆì„±í™˜í¬ (é‡‘æ˜Ÿç’°æŠ±) - ê¶ìˆ˜', description: 'ê°•ì´ ì§‘ì„ ê°ì‹¸ ì•ˆëŠ” í˜•íƒœë¡œ, ì¬ë¬¼ì´ ëª¨ì´ê³  ê·€ì¸ì˜ ë„ì›€ì„ ë°›ëŠ” ìµœê³ ì˜ ëª…ë‹¹ì…ë‹ˆë‹¤.', reason: 'ë¬¼ì´ë€ ì¬ë¬¼ì„ ëœ»í•˜ë©°, ë¬¼ì´ ë‚˜ë¥¼ ê°ì‹¸ëŠ” ê²ƒì€ ì¬ë¬¼ì´ ë‚˜ì—ê²Œ ëª¨ì´ëŠ” í˜•êµ­ì…ë‹ˆë‹¤.', score: 15 }); } 
            else if (formData.riverShape === 'ë°˜ê¶ìˆ˜') { score -= 15; negativeItems.push({ title: 'ë°˜ê¶ìˆ˜ (åå¼“æ°´) - ë°°ì‹ ê³¼ ì´íƒˆ', description: 'ê°•ì´ ì§‘ì„ ë“±ì§€ê³  í™œì²˜ëŸ¼ íœ˜ì–´ ë‚˜ê°€, ì¬ë¬¼ì´ í©ì–´ì§€ê³  ì¸ì‹¬ì„ ìƒê¸° ì‰½ìŠµë‹ˆë‹¤.', reason: 'ë¬¼ì´ ë“±ì„ ëŒë¦¬ê³  ë‚˜ê°€ëŠ” ê²ƒì€ ì¬ë¬¼ê³¼ ì‚¬ëŒì´ ë‚˜ë¥¼ ë– ë‚˜ê°€ëŠ” í˜•êµ­ì…ë‹ˆë‹¤. ì‹¬ë¦¬ì  ë¶ˆì•ˆê°ì„ ìœ ë°œí•©ë‹ˆë‹¤.', score: -15 }); solutions.push({ title: 'ë°˜ê¶ìˆ˜ ë¹„ë³´ì±…', description: 'ê°•ì´ ë³´ì´ëŠ” ì°½ê°€ì— íŒ”ê´˜ê²½ì´ë‚˜ ë³¼ë¡ê±°ìš¸ì„ ë‘ì–´ í‰í•œ ê¸°ìš´ì„ ë°˜ì‚¬ì‹œí‚¤ê³ , ì§‘ì•ˆì— ê´€ì—½ì‹ë¬¼ì„ ë§ì´ ë‘ì–´ ìƒê¸°ë¥¼ ë³´ì¶©í•˜ì„¸ìš”.', reason: 'ê±°ìš¸ì€ ë‚˜ìœ ê¸°ìš´ì„ ì³ë‚´ëŠ” ì—­í• ì„ í•˜ë©°, ì‹ë¬¼ì˜ ìƒëª…ë ¥ì€ í©ì–´ì§€ëŠ” ê¸°ìš´ì„ ì•ˆì •ì‹œí‚¤ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.' }); } 
            else if (rivers > 0 && hasBalconyRiver) { score += 5; positiveItems.push({ title: 'ìˆ˜ê°„ì¬ë¬¼ (æ°´å¹²è²¡ç‰©)', description: `ê±°ì‹¤ì—ì„œ ${rivers}ê°œì˜ ìˆ˜ê³„ê°€ ë³´ì—¬ ì¬ë¬¼ìš´ì— ë„ì›€ì´ ë©ë‹ˆë‹¤.`, reason: 'ë¬¼ì€ ì¬ë¬¼ì„ ìƒì§•í•©ë‹ˆë‹¤. ê°•ì˜ ëª¨ì–‘ì„ ì„ íƒí•˜ë©´ ë” ì •í™•í•œ ë¶„ì„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.', score: 5 }); }
            if (mountains > 0 && hasBalconyMountain) { score += 10; positiveItems.push({ title: 'ë°°ì‚° (èƒŒå±±) - ë“ ë“ í•œ ë’·ë°°', description: `ì£¼ë³€ ${mountains}ê°œì˜ ì‚°ì´ ë’¤ì—ì„œ ë°›ì³ì£¼ëŠ” í˜•íƒœì…ë‹ˆë‹¤.`, reason: 'ì‚°ì´ ë°”ëŒì„ ë§‰ì•„ì£¼ê³  ì•ˆì •ê°ì„ ì£¼ë©°, ê·€ì¸ì˜ ë„ì›€ì„ ë°›ëŠ” ìš´ì´ ìˆìŠµë‹ˆë‹¤.', score: 10 }); }
            if (parks > 0) { score += 10; positiveItems.push({ title: 'ëª…ë‹¹ (æ˜å ‚) - ë„“ì€ ê³µê°„', description: `ì£¼ë³€ ${parks}ê°œì˜ ê³µì›ì´ ìˆì–´ ê¸°ìš´ì´ ëª¨ì¼ ë„“ì€ ê³µê°„ì´ ìˆìŠµë‹ˆë‹¤.`, reason: 'ì§‘ ì•ì— ë„“ê³  ê¹¨ë—í•œ ê³µê°„ì´ ìˆìœ¼ë©´ ì¬ë¬¼ìš´ì´ ìƒìŠ¹í•˜ê³  ìƒê¸°ê°€ ë„˜ì¹©ë‹ˆë‹¤.', score: 10 }); }
            if (floor >= 3 && floor <= 8) { score += 10; positiveItems.push({ title: `ì§€ê¸° ê°•í•œ ${floor}ì¸µ`, description: 'ë‚˜ë¬´ê°€ ìë„ ìˆ˜ ìˆëŠ” ë†’ì´(20m) ë‚´ì— ìˆì–´ ë•…ì˜ ê¸°ìš´ì„ ì¶©ë¶„íˆ ë°›ìŠµë‹ˆë‹¤.', reason: 'ì§€ê¸°ëŠ” 3-8ì¸µê¹Œì§€ ë¯¸ì¹˜ë©°, ì´ ë²”ìœ„ê°€ ê±´ê°•ê³¼ ìƒëª…ë ¥ì´ ê°€ì¥ ì™•ì„±í•©ë‹ˆë‹¤.', score: 10 }); }
            else if (floor >= 15) { score -= 20; negativeItems.push({ title: `ê³ ì¸µ ${floor}ì¸µ - ì§€ê¸° ë¶€ì¡±`, description: '15ì¸µ ì´ìƒ ê³ ì¸µìœ¼ë¡œ ë•…ì˜ ê¸°ìš´ì´ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤.', reason: 'ê³ ì¸µì¼ìˆ˜ë¡ ë•…ì˜ ìê¸°ì¥ì´ ì•½í•´ì§€ë©°, ì—°êµ¬ ê²°ê³¼ ì„ì‹ ìœ¨ ê°ì†Œ, ë¶ˆë©´ì¦, ì–´ì§€ëŸ¼ì¦ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.', score: -20 }); solutions.push({ title: 'ê³ ì¸µ ì§€ê¸° ë³´ì™„ì±…', description: 'ì‹¤ë‚´ì— í™ì„ ë§ì´ ë‹´ì€ í° í™”ë¶„ì„ ì—¬ëŸ¬ ê°œ ë‘ê³ , ì²œì—°ì„ ì†Œí’ˆì„ ë°°ì¹˜í•˜ì„¸ìš”.', reason: 'ì‹ë¬¼ì˜ í™ê³¼ ëŒì´ ë¯¸ì„¸í•˜ê²Œë‚˜ë§ˆ ì§€ìê¸°ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.' }); }
            if (formData.direction === 'ë‚¨í–¥') { score += 10; positiveItems.push({ title: 'ì •ë‚¨í–¥', description: 'í–‡ë¹›ì´ í•˜ë£¨ 3ì‹œê°„ ì´ìƒ ì˜ ë“¤ì–´ ìƒê¸°ê°€ ë„˜ì¹©ë‹ˆë‹¤.', reason: 'íŠ¹íˆ ë‚® 12-2ì‹œì— í–‡ë¹›ì´ ì •ë©´ìœ¼ë¡œ ë“¤ì–´ì™€ ì–‘ì˜ ê¸°ìš´ì´ ê°€ë“í•©ë‹ˆë‹¤.', score: 10 }); }
            else if (formData.direction === 'ë™í–¥') { score += 5; positiveItems.push({ title: 'ë™í–¥ - ì•„ì¹¨ í–‡ì‚´', description: 'ì•„ì¹¨ í–‡ì‚´ì´ ë“¤ì–´ì™€ í•˜ë£¨ë¥¼ í™œê¸°ì°¨ê²Œ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', reason: 'ì•„ì¹¨ í–‡ë¹›ì€ í•˜ë£¨ì˜ ê¸°ìš´ì„ ì‹œì‘í•˜ëŠ” ê¸¸í•œ ì—ë„ˆì§€ì…ë‹ˆë‹¤.', score: 5 }); }
            else if (formData.direction === 'ì„œí–¥') { score -= 5; negativeItems.push({ title: 'ì„œí–¥ - ì˜¤í›„ í–‡ë¹›', description: 'ì˜¤í›„ 4-6ì‹œì— ê°•í•œ í–‡ë¹›ì´ ë“¤ì–´ì™€ ì—¬ë¦„ì— ë”ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', reason: 'ì €ë… í–‡ë¹›ì€ ë°¤ì˜ ì‹œì‘ì„ ì•Œë¦¬ëŠ” ê¸°ìš´ìœ¼ë¡œ, ìƒê¸°ë¥¼ ë¹¼ì•—ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', score: -5 }); }
            else if (formData.direction === 'ë¶í–¥') { score -= 10; negativeItems.push({ title: 'ë¶í–¥ - í–‡ë¹› ë¶€ì¡±', description: 'í–‡ë¹›ì´ ê±°ì˜ ë“¤ì§€ ì•Šì•„ ìŒìŠµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', reason: 'í–‡ë¹›ì´ ë¶€ì¡±í•˜ë©´ ìƒê¸°ê°€ ìƒì‹¤ë˜ê³  ë¬´ê¸°ë ¥í•´ì§‘ë‹ˆë‹¤.', score: -10 }); }
            if (towers > 0) { score -= 20; negativeItems.push({ title: 'ì†¡ì „íƒ‘ ì¸ê·¼ (é«˜å£“ç·š)', description: `200m ë‚´ì— ${towers}ê°œì˜ ì†¡ì „íƒ‘ì´ ìˆì–´ ê°•í•œ ì „ìê¸°ì¥ì˜ ì˜í–¥ì„ ë°›ìŠµë‹ˆë‹¤.`, reason: 'ë•…ì˜ ê¸°ìš´ì„ ì–´ì§€ëŸ½íˆê³  ê±´ê°•ì— í•´ë¡­ìŠµë‹ˆë‹¤.', score: -20 }); solutions.push({ title: 'ì†¡ì „íƒ‘ ë¹„ë³´ì±…', description: 'ì°½ê°€ì— ìˆ˜ì •(í¬ë¦¬ìŠ¤íƒˆ)ì„ ë†“ì•„ ë‚˜ìœ ê¸°ìš´ì„ ì •í™”í•˜ê³ , ìˆ¯ì„ ì§‘ì•ˆ ê³³ê³³ì— ë‘ì–´ ì „ìíŒŒë¥¼ í¡ìˆ˜í•˜ë„ë¡ í•©ë‹ˆë‹¤.', reason: 'ìˆ˜ì •ì€ ì „ìíŒŒë¥¼ ì •í™”í•˜ëŠ” íš¨ê³¼ê°€ ìˆìœ¼ë©°, ìˆ¯ì€ ì „ìíŒŒ ì°¨ë‹¨ ëŠ¥ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.' }); }
            if (tunnels > 0) { score -= 30; negativeItems.push({ title: 'í„°ë„ ê·¼ì²˜ (éš§é“) - ì¹˜ëª…ì !', description: `500m ë‚´ì— ${tunnels}ê°œì˜ í„°ë„ì´ ìˆìŠµë‹ˆë‹¤. ì‚°ì˜ í˜ˆë§¥ì„ ìë¥´ëŠ” ê°€ì¥ ì¹˜ëª…ì ì¸ í‰ì§€ì…ë‹ˆë‹¤.`, reason: 'í„°ë„ì€ ë•…ì˜ í˜ˆê´€ì„ ìë¥´ëŠ” ê²ƒìœ¼ë¡œ, ê¸°ìš´ì´ í„°ì§€ë“¯ ë¹ ì ¸ë‚˜ê°‘ë‹ˆë‹¤.', score: -30 }); solutions.push({ title: 'í„°ë„ ê·¼ì²˜ ìœ ì¼í•œ ë°©ë²•', description: 'ë² ë€ë‹¤ì— ìˆ˜ì¡°ë¥¼ ë‘ê³  ë¬¼ì„ ë‹´ì•„ ë‚˜ìœ ê¸°ìš´ì„ ì°¨ë‹¨í•˜ì„¸ìš”. í•˜ì§€ë§Œ ê·¼ë³¸ì  í•´ê²°ì€ ì–´ë µìŠµë‹ˆë‹¤.', reason: 'ë¬¼ì€ íë¥´ëŠ” ê¸°ìš´ì„ ë§‰ì•„ì£¼ì§€ë§Œ, í„°ë„ì˜ ì˜í–¥ì€ ë§¤ìš° ê°•ë ¥í•©ë‹ˆë‹¤.' }); }
            if (hasBalconyBuilding && !hasBalconyMountain) { score -= 15; negativeItems.push({ title: 'ì•ì„ ê°€ë¡œë§‰ëŠ” ê±´ë¬¼', description: 'ê±°ì‹¤ ì•ìª½ì— ê±´ë¬¼ì´ ì¡°ë§ì„ ë§‰ê³  ìˆìŠµë‹ˆë‹¤.', reason: '"ë‚´ ì¸ìƒì„ ë§‰ëŠ” ì‚°"ì´ ë˜ì–´ í•˜ëŠ” ì¼ì´ ì˜ í’€ë¦¬ì§€ ì•Šê³  ë‹µë‹µí•¨ì„ ëŠë‚ë‹ˆë‹¤.', score: -15 }); solutions.push({ title: 'ë§‰íŒ ì¡°ë§ ê°œì„ ì±…', description: 'ê±°ì‹¤ ì°½ê°€ì— ê±°ìš¸ì„ 45ë„ ê°ë„ë¡œ ë°°ì¹˜í•˜ì—¬ ì‹œì•¼ë¥¼ í™•ì¥ì‹œí‚¤ì„¸ìš”.', reason: 'ê±°ìš¸ì´ ë§‰íŒ ì‹œì•¼ë¥¼ í™•ì¥ì‹œí‚¤ëŠ” ì°©ì‹œ íš¨ê³¼ë¥¼ ì¤ë‹ˆë‹¤.' }); }
            if (formData.sunlightHours === 'ê±°ì˜ì—†ìŒ') { score -= 15; negativeItems.push({ title: 'í–‡ë¹› ë¶€ì¡±', description: 'í•˜ë£¨ í–‡ë¹›ì´ ê±°ì˜ ë“¤ì§€ ì•Šì•„ ìŒê¸°ê°€ ê°•í•©ë‹ˆë‹¤.', reason: 'í–‡ë¹›ì´ ë¶€ì¡±í•˜ë©´ ìƒê¸°ê°€ ìƒì‹¤ë˜ê³  ë¬´ê¸°ë ¥í•´ì§‘ë‹ˆë‹¤.', score: -15 }); solutions.push({ title: 'í–‡ë¹› ë¶€ì¡± í•´ê²°ì±…', description: 'ë°ì€ ì¡°ëª…ì„ ì‚¬ìš©í•˜ê³ , í°ìƒ‰/ë…¸ë€ìƒ‰ ê³„ì—´ ì¸í…Œë¦¬ì–´ë¡œ ì–‘ì˜ ê¸°ìš´ì„ ë³´ì¶©í•˜ì„¸ìš”.', reason: 'ì¸ê³µ ì¡°ëª…ìœ¼ë¡œ ì–´ë‘ì›€ì„ í•´ì†Œí•˜ê³ , ë°ì€ ìƒ‰ìƒìœ¼ë¡œ ì‹¬ë¦¬ì  ë°ìŒì„ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.' }); }
            else if (formData.sunlightHours === '1-2ì‹œê°„') { score -= 5; negativeItems.push({ title: 'í–‡ë¹› ë‹¤ì†Œ ë¶€ì¡±', description: 'í•˜ë£¨ 1-2ì‹œê°„ë§Œ í–‡ë¹›ì´ ë“¤ì–´ ì¶©ë¶„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.', reason: 'ìµœì†Œ 3ì‹œê°„ ì´ìƒ í–‡ë¹›ì´ ë“¤ì–´ì•¼ ìƒê¸°ê°€ ì¶©ë§Œí•©ë‹ˆë‹¤.', score: -5 }); }
            else if (formData.sunlightHours === '3ì‹œê°„ì´ìƒ') { score += 5; positiveItems.push({ title: 'ì¶©ë¶„í•œ ì±„ê´‘', description: 'í•˜ë£¨ 3ì‹œê°„ ì´ìƒ í–‡ë¹›ì´ ë“¤ì–´ì™€ ìƒê¸°ê°€ ë„˜ì¹©ë‹ˆë‹¤.', reason: 'ì¶©ë¶„í•œ í–‡ë¹›ì€ ì–‘ì˜ ê¸°ìš´ì„ ê°€ë“ ì±„ì›Œì¤ë‹ˆë‹¤.', score: 5 }); }
            if (cemeteries > 0 || hospitals > 0) { score -= 15; negativeItems.push({ title: 'ìŒê¸° ê°•í•œ ì‹œì„¤ ì¸ê·¼', description: `ì£¼ë³€ì— ${cemeteries > 0 ? 'ë¬˜ì§€' : ''}${cemeteries > 0 && hospitals > 0 ? ', ' : ''}${hospitals > 0 ? 'ë³‘ì›' : ''}ì´ ìˆìŠµë‹ˆë‹¤.`, reason: 'ìŒì˜ ê¸°ìš´ì´ ê°•í•œ ì‹œì„¤ì´ ê·¼ì²˜ì— ìˆì–´ ì§‘ì•ˆì˜ ìƒê¸°ê°€ ì•½í•´ì§€ê³  ìš°í™˜ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', score: -15 }); solutions.push({ title: 'ìŒê¸° ì°¨ë‹¨ ë¹„ë³´ì±…', description: 'ì§‘ì•ˆì„ í•­ìƒ ë°ê²Œ ìœ ì§€í•˜ê³ , ë¶‰ì€ìƒ‰ ì†Œí’ˆ(ê·¸ë¦¼, ì¿ ì…˜)ì„ í™œìš©í•˜ì—¬ ì–‘ì˜ ê¸°ìš´ì„ ê°•í™”í•˜ì„¸ìš”.', reason: 'ë°ì€ ì¡°ëª…ê³¼ ë¶‰ì€ ìƒ‰ìƒì€ ì–‘ì˜ ê¸°ìš´ì„ ê°•í™”í•˜ì—¬ ìŒê¸°ë¥¼ ìƒì‡„ì‹œí‚µë‹ˆë‹¤.' }); }
            if (formData.alleyPosition === 'í°ê¸¸Tì') { score -= 25; negativeItems.push({ title: 'Tìí˜• ë„ë¡œ ë (è·¯æ²–æ®º)', description: 'ë„ë¡œê°€ ì§‘ì„ ì •ë©´ìœ¼ë¡œ í–¥í•´ ëŒì§„í•˜ëŠ” ì „í˜•ì ì¸ í‰ì§€ì…ë‹ˆë‹¤.', reason: 'ë„ë¡œì˜ ê¸°ìš´ì´ ì§‘ì„ ê°•í•˜ê²Œ ë“¤ì´ë°›ì•„ ì‚¬ê³ ì™€ êµ¬ì„¤ìˆ˜ê°€ ë”°ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', score: -25 }); solutions.push({ title: 'Tì ë„ë¡œ ë¹„ë³´ì±…', description: 'í˜„ê´€ì´ë‚˜ ëŒ€ë¬¸ ì•ì— íŒ”ê´˜ê²½ì´ë‚˜ ë³¼ë¡ê±°ìš¸ì„ ê±¸ì–´ í‰í•œ ê¸°ìš´ì„ ë°˜ì‚¬ì‹œí‚¤ê³ , í‚¤ê°€ í° í™”ë¶„ì„ ë‘ì–´ ì¶©ëŒí•˜ëŠ” ê¸°ìš´ì„ ì™„í™”ì‹œí‚¤ì„¸ìš”.', reason: 'ê±°ìš¸ì€ ë‚˜ìœ ê¸°ìš´ì„ ë°˜ì‚¬í•˜ê³ , ì‹ë¬¼ì€ ì™„ì¶© ì—­í• ì„ í•©ë‹ˆë‹¤.' }); }
            if (formData.alleyPosition === 'yìí˜•ë„ë¡œ') { score -= 20; negativeItems.push({ title: 'Yìí˜• ë„ë¡œ (ê°€ìœ„ ì‚´)', description: 'ê°ˆë¼ì§€ëŠ” ë„ë¡œ ì‚¬ì´ì— ìœ„ì¹˜í•˜ì—¬ ê¸°ìš´ì´ ë§¤ìš° ë¶ˆì•ˆì •í•©ë‹ˆë‹¤.', reason: 'ë§ˆì¹˜ ê°€ìœ„ì˜ ë‚  ì‚¬ì´ì— ì§‘ì´ ë†“ì¸ í˜•ìƒì´ë¼ í•˜ì—¬ ê¸°ìš´ì´ ë¶ˆì•ˆì •í•˜ê³  ì‚¬ê³ ìˆ˜ê°€ ë”°ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', score: -20 }); solutions.push({ title: 'Yì ë„ë¡œ ë¹„ë³´ì±…', description: 'ê¸°ìš´ì´ ì¶©ëŒí•˜ëŠ” ì§€ì (ì§‘ ì•)ì— ë‘¥ê·¼ í™”ë¶„ì´ë‚˜ ì‘ì€ ìˆ˜ê²½ ì‹œì„¤ì„ ë‘ì–´ ê¸°ìš´ì˜ íë¦„ì„ ì™„í™”ì‹œí‚¤ì„¸ìš”.', reason: 'ë¬¼ê³¼ ë‘¥ê·¼ í˜•íƒœëŠ” ë‚ ì¹´ë¡œìš´ ì‚´ê¸°ë¥¼ ë¶€ë“œëŸ½ê²Œ ë§Œë“¤ì–´ì£¼ëŠ” íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤.' }); }
            if (formData.alleyPosition === 'êµ½ì€ë„ë¡œë°”ê¹¥') { score -= 20; negativeItems.push({ title: 'êµ½ì€ ë„ë¡œ ë°”ê¹¥ìª½ (ë°˜ê¶ ì‚´)', description: 'êµ½ì€ ë„ë¡œì˜ ë°”ê¹¥ìª½ì— ìœ„ì¹˜í•˜ì—¬ í‰í•œ ê¸°ìš´ì„ ë°›ìŠµë‹ˆë‹¤.', reason: 'ë„ë¡œë¥¼ ë‹¬ë¦¬ëŠ” ì°¨ë“¤ì˜ ì›ì‹¬ë ¥ì´ ë§Œë“¤ì–´ë‚´ëŠ” ì‚´ê¸°(ç…æ°£)ê°€ ê³„ì†í•´ì„œ ì§‘ì„ í–¥í•´ ë‚ ì•„ì˜¤ëŠ” í˜•ìƒìœ¼ë¡œ, ì¬ë¬¼ì´ í©ì–´ì§€ê³  ê±´ê°•ì„ í•´ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', score: -20 }); solutions.push({ title: 'ë°˜ê¶ ì‚´ ë¹„ë³´ì±…', description: 'ë„ë¡œê°€ ë³´ì´ëŠ” ë°©í–¥ìœ¼ë¡œ ì‚°ìˆ˜ìœ ë‚˜ ëŒ€ë‚˜ë¬´ ê°™ì´ ê³§ê²Œ ë»—ì€ ë‚˜ë¬´ë¥¼ ì‹¬ê±°ë‚˜, í•´ë‹¹ ì°½ë¬¸ì— ë¸”ë¼ì¸ë“œë¥¼ ì„¤ì¹˜í•˜ì—¬ ê¸°ìš´ì„ ì°¨ë‹¨í•˜ì„¸ìš”.', reason: 'ê³§ì€ ë‚˜ë¬´ëŠ” ë‚ ì•„ì˜¤ëŠ” ì‚´ê¸°ë¥¼ ë§‰ì•„ì£¼ëŠ” ë°©íŒ¨ ì—­í• ì„ í•˜ë©°, ë¸”ë¼ì¸ë“œëŠ” ë¬¼ë¦¬ì ì¸ ì°¨ë‹¨ íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤.' }); }
            if (formData.alleyPosition === 'êµì°¨ë¡œëª¨í‰ì´') { score -= 10; negativeItems.push({ title: 'êµì°¨ë¡œ ëª¨í‰ì´', description: 'ì°¨ê°€ êº¾ì´ëŠ” ëª¨í‰ì´ì— ìœ„ì¹˜í•˜ì—¬ ê¸°ìš´ì´ ë¶ˆì•ˆì •í•©ë‹ˆë‹¤.', reason: 'ì°¨ëŸ‰ì˜ ë¶ˆë¹›ê³¼ ì†ŒìŒì´ ì¦ê³ , ê¸°ìš´ì´ êº¾ì´ëŠ” ì§€ì ì´ë¼ ì‚°ë§Œí•©ë‹ˆë‹¤.', score: -10 }); solutions.push({ title: 'ëª¨í‰ì´ ë¹„ë³´ì±…', description: 'í•´ë‹¹ ë°©í–¥ ì°½ê°€ì— ë‘êº¼ìš´ ì»¤íŠ¼ì„ ì¹˜ê³ , ë‘¥ê·¼ ìì„ ê°€ì§„ ê´€ì—½ ì‹ë¬¼ì„ ë‘ì–´ ë‚ ì¹´ë¡œìš´ ê¸°ìš´ì„ ì™„í™”ì‹œí‚¤ì„¸ìš”.', reason: 'ì»¤íŠ¼ì€ ë¬¼ë¦¬ì ì¸ ì°¨ë‹¨ ì—­í• ì„ í•˜ë©°, ë‘¥ê·¼ ì ì‹ë¬¼ì€ ë¶€ë“œëŸ¬ìš´ ê¸°ìš´ìœ¼ë¡œ ì‚°ë§Œí•œ ê¸°ìš´ì„ ì¤‘í™”ì‹œí‚µë‹ˆë‹¤.' }); }
            if (formData.alleyPosition === 'ë§‰ë‹¤ë¥¸ë') { score -= 10; negativeItems.push({ title: 'ë§‰ë‹¤ë¥¸ ê³¨ëª© (ë§‰ì°½ì§‘)', description: 'ê³¨ëª© ê°€ì¥ ì•ˆìª½ì— ìœ„ì¹˜í•œ ì§‘ì…ë‹ˆë‹¤.', reason: 'ê¸°ìš´ì€ ìˆœí™˜í•´ì•¼ í•˜ëŠ”ë°, ë§‰ë‹¤ë¥¸ ê³³ì—ì„œëŠ” ì •ì²´ë©ë‹ˆë‹¤.', score: -10 }); solutions.push({ title: 'ë§‰ë‹¤ë¥¸ ê³¨ëª© ë¹„ë³´ì±…', description: 'ì§‘ ì•ì„ í•­ìƒ ë°ê³  ê¹¨ë—í•˜ê²Œ ìœ ì§€í•˜ê³ , í˜„ê´€ì— í’ê²½(é¢¨ç£¬)ì„ ë‹¬ì•„ ì†Œë¦¬ë¡œ ì •ì²´ëœ ê¸°ìš´ì„ í™œì„±í™”ì‹œí‚¤ì„¸ìš”.', reason: 'ì†Œë¦¬ëŠ” ì •ì²´ëœ ê¸°ìš´ì„ íë¥´ê²Œ ë§Œë“­ë‹ˆë‹¤.' }); }
            if (hasBalconyBuilding) { score -= 10; negativeItems.push({ title: 'ê±´ë¬¼ ëª¨ì„œë¦¬ (å°–è§’æ®º)', description: 'ì£¼ë³€ ê±´ë¬¼ì˜ ë¾°ì¡±í•œ ëª¨ì„œë¦¬ê°€ ë³´ì…ë‹ˆë‹¤.', reason: 'ë¾°ì¡±í•œ ëª¨ì„œë¦¬ê°€ í–¥í•˜ë©´ ê±´ê°•ì„ í•´ì¹˜ê³  ë§ˆìŒì„ ë¶ˆì•ˆí•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.', score: -10 }); solutions.push({ title: 'ê±´ë¬¼ ëª¨ì„œë¦¬ ë¹„ë³´ì±…', description: 'ëª¨ì„œë¦¬ê°€ í–¥í•˜ëŠ” ì°½ë¬¸ì— ì‘ì€ ê±°ìš¸ì„ ë‘ê±°ë‚˜, ê´€ì—½ì‹ë¬¼ í™”ë¶„ì„ ë†“ì•„ ë¾°ì¡±í•œ ê¸°ìš´ì„ ë§‰ê³  ë¶„ì‚°ì‹œí‚¤ì„¸ìš”.', reason: 'ì‹ë¬¼ê³¼ ê±°ìš¸ì´ ë‚ ì¹´ë¡œìš´ ì‚´ê¸°ë¥¼ ì™„í™”ì‹œì¼œì¤ë‹ˆë‹¤.' }); }
            if (formData.terrain.includes('ë¹„íƒˆ')) { score -= 15; negativeItems.push({ title: 'ë¹„íƒˆì§„ ê³³ (í•´ìˆ˜ì§€)', description: 'ì§‘ì´ ë¹„íƒˆì§„ ê³³ì— ìœ„ì¹˜í•´ ìˆìŠµë‹ˆë‹¤.', reason: 'ì €ì§€ëŒ€ë¥¼ ë“±ì§€ê³  ê³ ì§€ëŒ€ë¥¼ ë°”ë¼ë³´ë©´ ì¬ë¬¼ìš´ì´ ë‚˜ì©ë‹ˆë‹¤.', score: -15 }); solutions.push({ title: 'ë¹„íƒˆ ë¹„ë³´ì±…', description: 'ì§‘ì˜ ë’¤í¸ì— ë‹´ì¥ì„ ë†’ê²Œ ìŒ“ê±°ë‚˜ ë‚˜ë¬´ë¥¼ ì‹¬ì–´ ê¸°ìš´ì´ ë¹ ì ¸ë‚˜ê°€ëŠ” ê²ƒì„ ë§‰ìœ¼ì„¸ìš”.', reason: 'ë‹´ì¥ê³¼ ë‚˜ë¬´ê°€ ê¸°ìš´ì˜ íë¦„ì„ ë§‰ì•„ì¤ë‹ˆë‹¤.' }); }
            if (formData.terrain.includes('ê³¨ì§œê¸°')) { score -= 20; negativeItems.push({ title: 'ê³¨ì§œê¸° ì •ë©´', description: 'ì§‘ì´ ê³¨ì§œê¸°ë¥¼ ì •ë©´ìœ¼ë¡œ ë§ˆì£¼í•˜ê³  ìˆìŠµë‹ˆë‹¤.', reason: 'ê³¨ì§œê¸°ë¥¼ í†µí•´ ë°”ëŒ(ëƒ‰ê¸°)ì´ ë“¤ì´ì³ ê±´ê°• ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', score: -20 }); solutions.push({ title: 'ê³¨ì§œê¸° ë¹„ë³´ì±…', description: 'ê³¨ì§œê¸° ë°©í–¥ ì°½ë¬¸ì— ë‘êº¼ìš´ ì»¤íŠ¼ì„ ì„¤ì¹˜í•˜ê³ , ë°”ëŒë§‰ì´ìš© ë‚˜ë¬´ë‚˜ ë‹´ì¥ì„ ì„¸ìš°ì„¸ìš”.', reason: 'ë°”ëŒì„ ë¬¼ë¦¬ì ìœ¼ë¡œ ì°¨ë‹¨í•˜ì—¬ ëƒ‰ê¸°ì˜ ì¹¨ì…ì„ ë§‰ì•„ì•¼ í•©ë‹ˆë‹¤.' }); }
            if (formData.terrain.includes('í‰ì§€') && !hasBalconyMountain && formData.buildingType === 'ë‹¨ë…ì£¼íƒ') { score -= 15; negativeItems.push({ title: 'ì‚¬ë°©ì´ ë»¥ ëš«ë¦° í‰ì§€', description: 'ì£¼ë³€ì— ì‚°ì´ ì—†ê³  ì‚¬ë°©ì´ íŠ¸ì¸ í‰ì§€ì…ë‹ˆë‹¤.', reason: 'ë°”ëŒì´ ì‚¬ë°©ì—ì„œ ëª°ì•„ì³ ìƒê¸°ê°€ í©ì–´ì§‘ë‹ˆë‹¤.', score: -15 }); solutions.push({ title: 'í‰ì§€ ë¹„ë³´ì±…', description: 'ì§‘ ì£¼ë³€ì— ë‚˜ë¬´ë¥¼ ì‹¬ì–´ ë°”ëŒë§‰ì´ë¥¼ ë§Œë“¤ê³ , ë‹´ì¥ì„ ì„¤ì¹˜í•˜ì—¬ ê¸°ìš´ì´ ëª¨ì¼ ìˆ˜ ìˆê²Œ í•˜ì„¸ìš”.', reason: 'ì¸ê³µì ìœ¼ë¡œ ì‚°ì˜ ì—­í• ì„ í•˜ëŠ” ì¥ì• ë¬¼ì„ ë§Œë“¤ì–´ ë°”ëŒì„ ë§‰ê³  ê¸°ìš´ì„ ëª¨ì•„ì•¼ í•©ë‹ˆë‹¤.' }); }
            if (formData.balconyExpanded === 'ì˜ˆ') { score -= 5; negativeItems.push({ title: 'í™•ì¥í˜• ë°œì½”ë‹ˆ', description: 'ë² ë€ë‹¤ë¥¼ í™•ì¥í–ˆìŠµë‹ˆë‹¤.', reason: 'ì™¸ê¸°(å¤–æ°£)ì™€ ë‚´ê¸°(å…§æ°£)ê°€ ì§ì ‘ ì¶©ëŒí•˜ëŠ” ì™„ì¶© ê³µê°„ì´ ì—†ìŠµë‹ˆë‹¤.', score: -5 }); }
            if (mountains >= 2 && (formData.terrain.includes('í‰ì§€') || formData.terrain.includes('ì–¸ë•'))) { score += 10; positiveItems.push({ title: 'ì¢Œì²­ë£¡ ìš°ë°±í˜¸ (å·¦é‘é¾ å³ç™½è™)', description: 'ì¢Œìš°ë¡œ ì‚°ì´ë‚˜ ì§€í˜•ì´ ê°ì‹¸ì£¼ê³  ìˆìŠµë‹ˆë‹¤.', reason: 'ì¢Œìš°ì˜ ì§€í˜•ì´ ë°”ëŒì„ ë§‰ì•„ì£¼ê³  ê¸°ìš´ì„ ê°ì‹¸ ì•ˆì•„ì£¼ëŠ” ì•ˆì •ì ì¸ í˜•ì„¸ì…ë‹ˆë‹¤.', score: 10 }); }
            if (formData.terrain.includes('ì–¸ë•') && !formData.terrain.includes('ë¹„íƒˆ')) { score += 15; positiveItems.push({ title: 'ì „ì €í›„ê³  (å‰ä½å¾Œé«˜)', description: 'ì§‘í„°ì˜ ì•ì€ ë‚®ê³  ë’¤ëŠ” ë†’ì€ ì´ìƒì ì¸ ì§€í˜•ì…ë‹ˆë‹¤.', reason: 'ì•ˆì •ê°ì´ ìˆìœ¼ë©° ì¢‹ì€ ê¸°ìš´ì´ ë“¤ì–´ì™€ ë¨¸ë¬´ëŠ” ëª…ë‹¹ì˜ ì¡°ê±´ì…ë‹ˆë‹¤.', score: 15 }); }
            
            let grade = '', emoji = '';
            if (score >= 90) { grade = 'ì²œí•˜ì œì¼ ëª…ë‹¹'; emoji = 'ğŸ†'; } 
            else if (score >= 80) { grade = 'í›Œë¥­í•œ í„°'; emoji = 'ğŸŒŸ'; } 
            else if (score >= 70) { grade = 'ê´œì°®ì€ ì§‘'; emoji = 'ğŸ‘'; } 
            else if (score >= 60) { grade = 'ë³´í†µ'; emoji = 'ğŸ˜'; } 
            else if (score >= 50) { grade = 'ì£¼ì˜ í•„ìš”'; emoji = 'âš ï¸'; } 
            else { grade = 'ì´ì‚¬ ê¶Œì¥'; emoji = 'âŒ'; }

            await sleep(1000);

            return {
                address: formData.address, formData,
                totalScore: Math.min(100, Math.max(0, score)),
                grade, emoji, positiveItems, negativeItems, solutions,
                nearbyData: { mountains, rivers, parks, towers, tunnels, cemeteries, hospitals }
            };
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            renderFormOptions();
            DOMElements.addressInput.addEventListener('input', updateFormState);
            DOMElements.floorInput.addEventListener('input', updateFormState);
            DOMElements.buildingTypeSelect.addEventListener('change', updateFormState);
            DOMElements.balconyTipToggle.addEventListener('click', () => {
                DOMElements.balconyTipContent.classList.toggle('hidden');
            });
            renderApp();
            lucide.createIcons();
        });
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>
