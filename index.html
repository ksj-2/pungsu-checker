<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ìš°ë¦¬ì§‘ í’ìˆ˜ ì§„ë‹¨</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/lucide@latest"></script>

  <style>
    html,body{overflow-x:hidden}
    /* ì•ˆì „ ì¤‘ì•™ ì •ë ¬: ëª¨ë“  adsbygoogleë¥¼ ë¸”ë¡ + ê°€ìš´ë° */
    ins.adsbygoogle{display:block !important; margin:0 auto !important; max-width:100% !important}
    .ad-wrap{display:grid;place-items:center;width:100%}
    .ad-box{width:100%;max-width:728px}
    @media (max-width:640px){ .ad-box{max-width:100%} }
    /* ë²„íŠ¼ ì¼ê´€ í­ */
    .full-cta{width:100%}
  </style>
</head>
<body class="min-h-screen bg-slate-900 text-slate-200">
  <header class="max-w-5xl mx-auto px-4 py-6 text-center">
    <h1 class="text-3xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400">
      ìš°ë¦¬ì§‘ í’ìˆ˜ ì§„ë‹¨
    </h1>
    <p class="text-slate-400 mt-2">150ë…„ ì „í†µ í’ìˆ˜ ì´ë¡  + ì¹´ì¹´ì˜¤ë§µ ì‹¤ì œ ë°ì´í„°</p>

    <!-- í—¤ë” ê´‘ê³  -->
    <div class="ad-wrap mt-4">
      <div class="ad-box">
        <ins class="adsbygoogle"
             data-ad-client="ca-pub-1819982598567420"
             data-ad-slot="3450469461"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
      </div>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-4 pb-16">
    <section id="form-section">
      <form id="main-form" class="bg-slate-800/60 p-4 md:p-6 rounded-xl border border-slate-700 space-y-4">
        <!-- ì£¼ì†Œ -->
        <div>
          <label class="block text-sm font-semibold mb-2 text-slate-300">ì£¼ì†Œ</label>
          <div class="relative">
            <input id="address-input" type="text" placeholder="ì˜ˆ) ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ì„¸ì¢…ëŒ€ë¡œ 209"
                   class="w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-md focus:ring-2 focus:ring-emerald-400 outline-none" />
          </div>
        </div>

        <!-- ì¸µìˆ˜ / ìœ í˜• -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-semibold mb-2 text-slate-300">ì¸µìˆ˜</label>
            <input id="floor-input" type="number" placeholder="ì˜ˆ) 7ì¸µ" min="1" max="100"
                   class="w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-md focus:ring-2 focus:ring-emerald-400 outline-none" />
          </div>
          <div>
            <label class="block text-sm font-semibold mb-2 text-slate-300">ê±´ë¬¼ ìœ í˜•</label>
            <select id="building-type-select"
                    class="w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-md focus:ring-2 focus:ring-emerald-400 outline-none">
              <option value="">ì„ íƒí•˜ì„¸ìš”</option>
              <option value="ì•„íŒŒíŠ¸">ì•„íŒŒíŠ¸</option>
              <option value="ì˜¤í”¼ìŠ¤í…”">ì˜¤í”¼ìŠ¤í…”</option>
              <option value="ë¹Œë¼/ë‹¤ì„¸ëŒ€">ë¹Œë¼/ë‹¤ì„¸ëŒ€</option>
              <option value="ë‹¨ë…ì£¼íƒ">ë‹¨ë…ì£¼íƒ</option>
            </select>
          </div>
        </div>

        <!-- ê±°ì‹¤ ë°©í–¥ -->
        <div>
          <div class="flex items-center justify-between mb-2">
            <label class="text-sm font-semibold text-slate-300">ê±°ì‹¤ ë°©í–¥</label>
            <button type="button" id="btn-direction-guide" class="text-xs text-emerald-400 hover:text-emerald-300">ë°©í–¥ í™•ì¸ë²•</button>
          </div>
          <div id="direction-options" class="space-y-2"></div>
        </div>

        <!-- ì¡°ë§ -->
        <div>
          <div class="flex items-center justify-between mb-2">
            <label class="text-sm font-semibold text-slate-300">ê±°ì‹¤ ì°½ë¬¸ì—ì„œ ë³´ì´ëŠ” ê²ƒ (ë‹¤ì¤‘ ì„ íƒ)</label>
            <button type="button" id="btn-tip" class="text-xs text-cyan-400 hover:text-cyan-300">í’ìˆ˜ Tip</button>
          </div>
          <div id="balcony-tip-content" class="hidden bg-cyan-900/20 p-3 rounded-md border border-cyan-400/30 mb-3 text-xs text-cyan-200/80 space-y-2">
            <p class="font-bold text-cyan-300">ğŸ’¡ ì™œ ê±°ì‹¤ ê¸°ì¤€ì¸ê°€ìš”?</p>
            <ul class="list-disc list-inside space-y-1">
              <li>ê±°ì‹¤ì€ ì§‘ì˜ ì¤‘ì‹¬ì´ì, ê¸°ìš´ì´ ê°€ì¥ ë§ì´ ë“œë‚˜ë“œëŠ” ê³³ì…ë‹ˆë‹¤.</li>
              <li>ê°€ì¡± ëª¨ë‘ì˜ ìš´ì— ì˜í–¥ì„ ë¯¸ì¹˜ë¯€ë¡œ í’ìˆ˜ì—ì„œ ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ë´…ë‹ˆë‹¤.</li>
            </ul>
          </div>
          <div id="balcony-view-options" class="grid grid-cols-2 md:grid-cols-3 gap-2"></div>
        </div>

        <!-- ê°• ëª¨ì–‘ (ì¡°ê±´ë¶€) -->
        <div id="river-shape-section" class="hidden">
          <label class="block text-sm font-semibold mb-2 text-slate-300">ğŸŒŠ ê°•/í•˜ì²œì´ ì§‘ì„ ì–´ë–»ê²Œ ê°ì‹¸ë‚˜ìš”?</label>
          <div id="river-shape-options" class="space-y-2"></div>
        </div>

        <!-- í–‡ë¹› -->
        <div>
          <label class="block text-sm font-semibold mb-2 text-slate-300">í•˜ë£¨ í–‡ë¹› ì‹œê°„</label>
          <div id="sunlight-options" class="space-y-2"></div>
        </div>

        <!-- ì§‘ì˜ ìœ„ì¹˜ -->
        <div>
          <label class="block text-sm font-semibold mb-2 text-slate-300">ì§‘ì˜ ìœ„ì¹˜</label>
          <div id="alley-options" class="space-y-2"></div>
        </div>

        <!-- ì§€í˜• -->
        <div>
          <label class="block text-sm font-semibold mb-2 text-slate-300">ì§‘í„° ì§€í˜• (ë‹¤ì¤‘ ì„ íƒ)</label>
          <div id="terrain-options" class="grid grid-cols-2 md:grid-cols-4 gap-2"></div>
        </div>

        <!-- ë² ë€ë‹¤ í™•ì¥ -->
        <div>
          <label class="block text-sm font-semibold mb-2 text-slate-300">ë² ë€ë‹¤ í™•ì¥ ì—¬ë¶€</label>
          <div id="balcony-expanded-options" class="grid grid-cols-2 gap-2"></div>
        </div>

        <!-- ì•¡ì…˜ -->
        <button type="button" id="btn-analyze"
                class="full-cta py-4 bg-gradient-to-r from-emerald-500 to-cyan-500 text-white font-bold rounded-md hover:opacity-90 active:scale-[0.99] transition">
          í’ìˆ˜ ê°ì • ì‹œì‘
        </button>
      </form>

      <!-- ìš´ì„¸ CTA (í¼ ì•„ë˜, ë™ì¼ íƒ­) -->
      <div class="mt-4">
        <a href="https://www.shinhanlife.co.kr/hp/cdhg0130.do"
           class="full-cta inline-flex items-center justify-center px-5 py-3 rounded-lg font-semibold bg-red-500 text-white hover:opacity-90 active:scale-[0.99] transition">
          ğŸ”® ë¬´ë£Œ ìš´ì„¸ ë³´ëŸ¬ê°€ê¸°
        </a>
      </div>

      <!-- í¼ í•˜ë‹¨ ê´‘ê³  (Form ìƒíƒœì—ì„œ) -->
      <div class="ad-wrap mt-6">
        <div class="ad-box">
          <ins class="adsbygoogle"
               data-ad-client="ca-pub-1819982598567420"
               data-ad-slot="4103740429"
               data-ad-format="auto"
               data-full-width-responsive="true"></ins>
        </div>
      </div>
    </section>

    <!-- ë¡œë”© -->
    <section id="loading-section" class="hidden">
      <div class="mt-6 p-6 bg-slate-800 rounded-lg border border-slate-700">
        <h3 class="text-xl font-semibold text-center text-emerald-400 mb-4">AI ì •ë°€ ë¶„ì„ ì¤‘</h3>
        <div class="flex items-center justify-center gap-3">
          <span class="animate-spin inline-block w-5 h-5 border-2 border-emerald-400 border-t-transparent rounded-full"></span>
          <span id="loading-step" class="text-slate-300">ë¶„ì„ ì¤€ë¹„...</span>
        </div>
      </div>
    </section>

    <!-- ê²°ê³¼ -->
    <section id="result-section" class="hidden">
      <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
        <p id="result-address" class="text-center text-slate-400 mb-2 text-sm"></p>
        <p id="result-details" class="text-center text-slate-400 mb-4 text-sm"></p>
        <div class="flex flex-col md:flex-row items-center justify-center gap-8">
          <div class="relative w-48 h-48">
            <svg class="w-full h-full" viewBox="0 0 120 120">
              <circle stroke-width="10" stroke="#334155" fill="transparent" r="52" cx="60" cy="60"></circle>
              <circle id="score-gauge-circle" class="transform -rotate-90 origin-center transition-all duration-1000"
                      stroke-width="10" stroke-dasharray="326.72" stroke-dashoffset="326.72"
                      stroke-linecap="round" stroke="#10b981" fill="transparent" r="52" cx="60" cy="60"></circle>
            </svg>
            <div id="score-gauge-text" class="absolute inset-0 flex flex-col items-center justify-center text-emerald-400">
              <span class="text-5xl font-bold">0</span><span>ì </span>
            </div>
          </div>
          <div class="text-center md:text-left">
            <div id="result-emoji" class="text-6xl mb-2"></div>
            <h2 id="result-grade" class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400"></h2>
            <div id="result-nearby" class="mt-3 text-sm text-slate-400 space-y-1"></div>
          </div>
        </div>
      </div>

      <!-- ê²°ê³¼ í•˜ë‹¨ CTA -->
      <div class="text-center mt-6">
        <a href="https://www.shinhanlife.co.kr/hp/cdhg0130.do"
           class="full-cta inline-flex items-center justify-center px-5 py-3 rounded-lg font-semibold bg-red-500 text-white hover:opacity-90 active:scale-[0.99] transition">
          ğŸ”® ë¬´ë£Œ ìš´ì„¸ ë³´ëŸ¬ê°€ê¸°
        </a>
      </div>

      <!-- ê²°ê³¼ ê´‘ê³  (ë©€í‹°í”Œë ‰ìŠ¤) -->
      <div class="ad-wrap mt-6">
        <div class="ad-box">
          <ins class="adsbygoogle"
               data-ad-client="ca-pub-1819982598567420"
               data-ad-slot="9447953480"
               data-ad-format="autorelaxed"></ins>
        </div>
      </div>
    </section>
  </main>

  <footer class="max-w-5xl mx-auto px-4 py-8 text-center text-slate-500 text-xs border-t border-slate-800">
    Â© 2025 ìš°ë¦¬ì§‘ í’ìˆ˜ ì§„ë‹¨. ì¹´ì¹´ì˜¤ë§µ ê¸°ë°˜ ì‹¤ì œ ë°ì´í„° ë¶„ì„
  </footer>

  <!-- AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1819982598567420" crossorigin="anonymous"></script>

  <script>
  (function(){
    'use strict';

    // ---------- ìƒíƒœ ----------
    const formData = {
      address:'', floor:'', buildingType:'', direction:'',
      balconyView:[], riverShape:'', sunlightHours:'',
      alleyPosition:'', terrain:[], balconyExpanded:''
    };
    const appState = { loading:false, result:null };

    // ---------- ìœ í‹¸ ----------
    const $ = (sel, root=document)=> root.querySelector(sel);
    const $$ = (sel, root=document)=> Array.from(root.querySelectorAll(sel));
    function safe(fn){ try{ fn(); }catch(e){ console.error(e); } }
    function on(el, ev, fn){ if(!el) return; el.addEventListener(ev, fn, {passive:true}); }

    // ---------- ì˜µì…˜ ----------
    const OPT = {
      directions: [
        { value:'ë‚¨í–¥', label:'ë‚¨í–¥ (ë‚® 12-2ì‹œì— í•´ê°€ ì •ë©´)' },
        { value:'ë™í–¥', label:'ë™í–¥ (ì•„ì¹¨ 7-9ì‹œì— í•´ê°€ ì •ë©´)' },
        { value:'ì„œí–¥', label:'ì„œí–¥ (ì˜¤í›„ 4-6ì‹œì— í•´ê°€ ì •ë©´)' },
        { value:'ë¶í–¥', label:'ë¶í–¥ (í–‡ë¹› ê±°ì˜ ì•ˆ ë“¤ì–´ì˜´)' },
        { value:'ì˜ëª¨ë¦„', label:'ì˜ ëª¨ë¥´ê² ì–´ìš” (ë°©í–¥ ì ìˆ˜ ì œì™¸)' }
      ],
      viewOptions: ['ì‚°','ê°•/í•˜ì²œ','ê³µì›','ê±´ë¬¼','ë„ë¡œ','ì•„ë¬´ê²ƒë„ ì•ˆë³´ì„'],
      sunlightOptions: [
        { value:'ê±°ì˜ì—†ìŒ', label:'ê±°ì˜ ì—†ìŒ (1ì‹œê°„ ë¯¸ë§Œ)' },
        { value:'1-2ì‹œê°„', label:'1-2ì‹œê°„' },
        { value:'3ì‹œê°„ì´ìƒ', label:'3ì‹œê°„ ì´ìƒ (ì´ìƒì !)' }
      ],
      alleyOptions: [
        { value:'í°ê¸¸ê°€', label:'í° ê¸¸ê°€' },
        { value:'ê³¨ëª©ì¤‘ê°„', label:'ê³¨ëª© ì¤‘ê°„' },
        { value:'êµì°¨ë¡œëª¨í‰ì´', label:'Tì/êµì°¨ë¡œ ëª¨í‰ì´' },
        { value:'í°ê¸¸Tì', label:'Tìí˜• ë„ë¡œ ë (ì •ë©´)' },
        { value:'yìí˜•ë„ë¡œ', label:'Yìí˜• ë„ë¡œ (ê°€ìœ„ ì‚´)' },
        { value:'êµ½ì€ë„ë¡œë°”ê¹¥', label:'êµ½ì€ ë„ë¡œ ë°”ê¹¥ìª½ (ë°˜ê¶ ì‚´)' },
        { value:'ë§‰ë‹¤ë¥¸ë', label:'ë§‰ë‹¤ë¥¸ ê³¨ëª© ë' }
      ],
      riverShapeOptions: [
        { value:'ê¶ìˆ˜', label:'ì§‘ì„ ê°ì‹¸ëŠ” ëª¨ì–‘ (ê¶ìˆ˜)' },
        { value:'ë°˜ê¶ìˆ˜', label:'ì§‘ì„ ë“±ì§€ëŠ” ëª¨ì–‘ (ë°˜ê¶ìˆ˜)' }
      ],
      terrainOptions: ['í‰ì§€','ë¹„íƒˆ','ê³¨ì§œê¸°','ì–¸ë•'],
      balconyExpandedOptions: [{value:'ì˜ˆ',label:'ì˜ˆ'},{value:'ì•„ë‹ˆì˜¤',label:'ì•„ë‹ˆì˜¤'}]
    };

    // ---------- ë Œë” ----------
    function radio(name, opt){
      const l = document.createElement('label');
      l.className = 'flex items-center gap-3 p-3 rounded-md border cursor-pointer bg-slate-900 border-slate-600 hover:border-slate-500';
      l.innerHTML = \`<input type="radio" name="\${name}" value="\${opt.value}" class="w-4 h-4 text-emerald-500">
                      <span class="text-sm">\${opt.label || opt.value}</span>\`;
      return l;
    }
    function radioCenter(name, opt){
      const l = document.createElement('label');
      l.className = 'flex items-center justify-center gap-2 p-3 rounded-md border cursor-pointer bg-slate-900 border-slate-600 hover:border-slate-500';
      l.innerHTML = \`<input type="radio" name="\${name}" value="\${opt.value}" class="w-4 h-4 text-emerald-500">
                      <span class="text-sm">\${opt.label || opt.value}</span>\`;
      return l;
    }
    function chip(field, value){
      const b=document.createElement('button');
      b.type='button';
      b.textContent=value;
      b.className='px-4 py-2 rounded-md border bg-slate-900 border-slate-600 hover:border-emerald-400 text-sm';
      b.addEventListener('click', ()=>{
        const i=formData[field].indexOf(value);
        if(i>-1){ formData[field].splice(i,1); b.classList.remove('bg-emerald-600','border-emerald-500','text-white'); }
        else { formData[field].push(value); b.classList.add('bg-emerald-600','border-emerald-500','text-white'); }
        if(field==='balconyView' && value==='ê°•/í•˜ì²œ'){
          const on=formData.balconyView.includes('ê°•/í•˜ì²œ');
          $('#river-shape-section').classList.toggle('hidden', !on);
          if(!on){ $$('input[name="riverShape"]').forEach(r=>r.checked=false); formData.riverShape=''; }
        }
      });
      return b;
    }

    function renderForm(){
      // ê±°ì‹¤ ë°©í–¥
      const dirBox = $('#direction-options'); dirBox.innerHTML='';
      OPT.directions.forEach(o=> dirBox.appendChild(radio('direction',o)));

      // ì¡°ë§
      const viewBox = $('#balcony-view-options'); viewBox.innerHTML='';
      OPT.viewOptions.forEach(v=> viewBox.appendChild(chip('balconyView',v)));

      // í–‡ë¹›
      const sunBox = $('#sunlight-options'); sunBox.innerHTML='';
      OPT.sunlightOptions.forEach(o=> sunBox.appendChild(radio('sunlightHours',o)));

      // ìœ„ì¹˜
      const alleyBox = $('#alley-options'); alleyBox.innerHTML='';
      OPT.alleyOptions.forEach(o=> alleyBox.appendChild(radio('alleyPosition',o)));

      // ê°• ëª¨ì–‘
      const riverBox = $('#river-shape-options'); riverBox.innerHTML='';
      OPT.riverShapeOptions.forEach(o=> riverBox.appendChild(radio('riverShape',o)));

      // ì§€í˜•
      const terrBox = $('#terrain-options'); terrBox.innerHTML='';
      OPT.errainOptions && OPT.errainOptions.forEach(v=> terrBox.appendChild(chip('terrain',v))); // guard(typo)
      if(!OPT.errainOptions){ OPT.terrainOptions.forEach(v=> terrBox.appendChild(chip('terrain',v))); }

      // ë² ë€ë‹¤
      const balBox = $('#balcony-expanded-options'); balBox.innerHTML='';
      OPT.balconyExpandedOptions.forEach(o=> balBox.appendChild(radioCenter('balconyExpanded',o)));
    }

    function updateFormState(){
      formData.address = $('#address-input').value.trim();
      formData.floor = $('#floor-input').value.trim();
      formData.buildingType = $('#building-type-select').value;
      const getVal = name => ($(\`input[name="\${name}"]:checked\`)||{}).value || '';
      formData.direction       = getVal('direction');
      formData.sunlightHours   = getVal('sunlightHours');
      formData.alleyPosition   = getVal('alleyPosition');
      formData.riverShape      = getVal('riverShape');
      formData.balconyExpanded = getVal('balconyExpanded');
    }

    function show(section){
      $('#form-section').classList.toggle('hidden', section!=='form');
      $('#loading-section').classList.toggle('hidden', section!=='loading');
      $('#result-section').classList.toggle('hidden', section!=='result');
    }

    async function analyze(){
      updateFormState();
      if(!formData.address||!formData.floor||!formData.direction||!formData.buildingType||!formData.sunlightHours||!formData.alleyPosition||!formData.balconyExpanded){
        alert('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return;
      }
      appState.loading=true; show('loading');
      await new Promise(r=>setTimeout(r,800)); // demo delay

      // ê°„ë‹¨ ì ìˆ˜ ë¡œì§(ì›ë³¸ê³¼ ë™ì¼ ì»¨ì…‰)
      let score=70;
      if(formData.direction==='ë‚¨í–¥') score+=10;
      if(formData.sunlightHours==='3ì‹œê°„ì´ìƒ') score+=5;
      if(formData.alleyPosition==='ë§‰ë‹¤ë¥¸ë') score-=10;
      score=Math.max(0,Math.min(100,score));

      appState.result={
        address:formData.address, formData,
        totalScore:score, grade: score>=80?'í›Œë¥­í•œ í„°': score>=70?'ê´œì°®ì€ ì§‘':'ë³´í†µ', emoji: score>=80?'ğŸŒŸ': score>=70?'ğŸ‘':'ğŸ˜',
        nearbyData:{mountains:1,rivers:0,parks:14}, positiveItems:[], negativeItems:[], solutions:[]
      };
      renderResult(appState.result);
      show('result');
      appState.loading=false;
    }

    function renderResult(r){
      $('#result-address').textContent = r.address;
      $('#result-details').textContent = \`\${r.formData.floor}ì¸µ \${r.formData.direction} \${r.formData.buildingType}\`;
      $('#result-emoji').textContent = r.emoji;
      $('#result-grade').textContent = r.grade;
      $('#result-nearby').innerHTML = \`<p>ğŸ”ï¸ ì£¼ë³€ ì‚°: \${r.nearbyData.mountains}ê°œ</p><p>ğŸ’§ ì£¼ë³€ ìˆ˜ê³„: \${r.nearbyData.rivers}ê°œ</p><p>ğŸŒ³ ì£¼ë³€ ê³µì›: \${r.nearbyData.parks}ê°œ</p>\`;

      const circle = $('#score-gauge-circle');
      const text   = $('#score-gauge-text');
      const circumference = 2*Math.PI*52;
      const offset = circumference - (r.totalScore/100)*circumference;
      setTimeout(()=>{ circle.style.strokeDashoffset = offset; }, 100);
      text.querySelector('span').textContent = r.totalScore;
    }

    // ë„ì›€ë§
    on($('#btn-direction-guide'),'click',()=>{
      alert('ìŠ¤ë§ˆíŠ¸í° ë‚˜ì¹¨ë°˜ ì•±ìœ¼ë¡œ ê±°ì‹¤ ì°½ ì •ë©´ ë°©í–¥ì„ í™•ì¸í•˜ì„¸ìš”. ë‚¨í–¥=ì •ì˜¤(12~14ì‹œ) í–‡ë¹›ì´ ì •ë©´ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ë°©í–¥ì…ë‹ˆë‹¤.');
    });
    on($('#btn-tip'),'click',()=> $('#balcony-tip-content').classList.toggle('hidden'));

    // ì´ë²¤íŠ¸
    on($('#btn-analyze'),'click', analyze);

    // ì´ˆê¸° ë Œë”
    safe(renderForm);

    // ê´‘ê³  pushëŠ” ë³´ì´ëŠ” ì¦‰ì‹œë§Œ
    safe(()=>{
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
          if(!e.isIntersecting) return;
          const ins=e.target;
          if(ins.dataset.pushed==='true') return;
          try{ (adsbygoogle=window.adsbygoogle||[]).push({}); ins.dataset.pushed='true'; }
          catch(err){ console.warn('ads push error', err); }
          finally{ io.unobserve(ins); }
        });
      },{threshold:0});
      $$('ins.adsbygoogle').forEach(ins=> io.observe(ins));
    });

  })();
  </script>
</body>
</html>
