<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>우리집 풍수 진단 (fixed)</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* --- 1) 광고가 모바일에서 잘리지 않도록 --- */
    .ad-wrap {
      width: 100%;
      max-width: 100%;
      display: block;
      overflow: visible;        /* 잘림 방지 */
    }
    .ad-wrap iframe,
    .ad-wrap img {
      width: 100% !important;   /* 컨테이너 너비에 맞춤 */
      height: auto !important;  /* 비율 유지 */
      max-width: 100% !important;
      display: block;
    }

    /* 구글 자동광고에서 절대폭을 강제하는 경우를 대비 */
    .ad-wrap *[style*="width:"] { width: 100% !important; }

    /* --- 2) 결과 화면 CTA가 갑자기 좁아지는 문제 방지 --- */
    .cta-wide {
      width: 100%;
      max-width: 560px;          /* 데스크톱에서 보기 좋은 최대폭 */
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    /* 공유 영역이 flex일 때 줄바꿈하면서 버튼폭이 줄어드는 것을 방지 */
    .share-area {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
    }
    .share-area > a {
      flex: 1 1 150px;           /* 버튼이 너무 좁아지지 않도록 최소폭 확보 */
    }

    /* iOS에서 버튼이 컨텐트에 맞게 줄어드는 현상 방지 */
    .btn {
      min-width: 0;
      -webkit-appearance: none;
    }

    /* --- 3) 섹션 안전가드: 엘립시스(...) 같은 잘못된 텍스트가 들어와도 보여주기 --- */
    .section { display: block; }
  </style>
</head>
<body class="bg-slate-900 text-slate-100 antialiased">

  <main class="max-w-3xl mx-auto px-4 py-7 sm:py-10">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-center mb-2">우리집 풍수 진단</h1>
    <p class="text-center text-slate-400 mb-8">150년 전통 풍수 이론 + 카카오맵 실제 데이터</p>

    <!-- 주소 -->
    <div class="mb-5">
      <label class="block text-sm font-semibold mb-2 text-slate-300">주소</label>
      <input id="addr" type="text" placeholder="서울 은평구 은평로 111 이마트은평점"
             class="w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-lg focus:ring-2 focus:ring-emerald-400 focus:outline-none" />
    </div>

    <!-- 층수 + 건물유형 -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
      <div>
        <label class="block text-sm font-semibold mb-2 text-slate-300">층수</label>
        <input id="floor" type="number" min="1" class="w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-lg focus:ring-2 focus:ring-emerald-400 focus:outline-none" value="1" />
      </div>
      <div>
        <label class="block text-sm font-semibold mb-2 text-slate-300">건물 유형</label>
        <select id="building" class="w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-lg focus:ring-2 focus:ring-emerald-400 focus:outline-none">
          <option value="">선택하세요</option>
          <option>단독주택</option>
          <option>아파트</option>
          <option>빌라/연립</option>
          <option>오피스텔</option>
        </select>
      </div>
    </div>

    <!-- 거실 방향 + 가이드 -->
    <section class="section mb-6" id="sec-direction">
      <div class="flex items-center justify-between mb-2">
        <label class="block text-sm font-semibold text-slate-300">거실 방향</label>
        <button type="button" class="text-xs px-3 py-1 rounded-full bg-slate-700 hover:bg-slate-600"
                onclick="toggleDirectionGuide()">
          방향 확인법
        </button>
      </div>

      <div id="direction-guide" class="hidden mb-3 text-sm text-slate-300 bg-slate-800 border border-slate-700 rounded-lg p-3">
        현관을 등지고 거실 큰 창이 바라보는 방향을 기준으로 남/북/동/서를 선택하세요.
        나침반 앱이나 카카오맵 길찾기 화면의 방향표시를 참고해도 좋습니다.
      </div>

      <div class="grid grid-cols-4 gap-2">
        <button class="dir btn px-3 py-2 rounded-md bg-slate-800 border border-slate-700 hover:border-emerald-400" data-dir="N">북</button>
        <button class="dir btn px-3 py-2 rounded-md bg-slate-800 border border-slate-700 hover:border-emerald-400" data-dir="E">동</button>
        <button class="dir btn px-3 py-2 rounded-md bg-slate-800 border border-slate-700 hover:border-emerald-400" data-dir="S">남</button>
        <button class="dir btn px-3 py-2 rounded-md bg-slate-800 border border-slate-700 hover:border-emerald-400" data-dir="W">서</button>
      </div>
    </section>

    <!-- 창문에서 보이는 것 (다중 선택) -->
    <section class="section mb-6">
      <label class="block text-sm font-semibold mb-2 text-slate-300">거실 창문에서 보이는 것 (다중 선택)</label>
      <div class="grid grid-cols-2 sm:grid-cols-3 gap-2 text-sm">
        <label class="flex items-center gap-2"><input type="checkbox" value="park" class="accent-emerald-500">공원</label>
        <label class="flex items-center gap-2"><input type="checkbox" value="river" class="accent-emerald-500">강/하천</label>
        <label class="flex items-center gap-2"><input type="checkbox" value="road" class="accent-emerald-500">큰 도로</label>
        <label class="flex items-center gap-2"><input type="checkbox" value="school" class="accent-emerald-500">학교</label>
        <label class="flex items-center gap-2"><input type="checkbox" value="cemetery" class="accent-emerald-500">장묘시설</label>
        <label class="flex items-center gap-2"><input type="checkbox" value="nothing" class="accent-emerald-500">특이사항 없음</label>
      </div>
    </section>

    <!-- 광고 (모바일에서 잘리지 않도록) -->
    <div class="ad-wrap my-6">
      <!-- 실제 광고 스크립트를 넣으시면 그대로 100% 반응형으로 들어갑니다 -->
      <img src="https://via.placeholder.com/940x250?text=%EA%B4%91%EA%B3%A0+%28Responsive%29" alt="ad" />
    </div>

    <!-- 풍수 감정 시작 버튼 -->
    <button id="start" class="btn cta-wide mt-2 py-4 rounded-xl bg-emerald-500 hover:bg-emerald-400 text-lg font-extrabold tracking-tight shadow-lg shadow-emerald-500/20">
      풍수 감정 시작
    </button>

    <!-- 결과 카드 -->
    <section id="result" class="hidden mt-10 p-5 sm:p-7 rounded-2xl bg-slate-800 border border-slate-700">
      <div class="flex items-center gap-4 mb-2">
        <div class="w-20 h-20 rounded-full border-4 border-emerald-400 flex items-center justify-center text-2xl font-bold">70</div>
        <div>
          <h3 class="text-xl font-extrabold text-emerald-400">괜찮은 집</h3>
          <p class="text-sm text-slate-300">주변 산: 1개 · 주변 수계: 0개 · 주변 공원: 14개</p>
        </div>
      </div>

      <!-- 공유 -->
      <div class="mt-5">
        <h4 class="font-semibold mb-2">결과 공유하기</h4>
        <div class="share-area">
          <a class="px-4 py-3 rounded-lg bg-yellow-400 text-black font-bold text-center">카카오톡</a>
          <a class="px-4 py-3 rounded-lg bg-blue-600 font-bold text-center">페이스북</a>
          <a class="px-4 py-3 rounded-lg bg-sky-500 font-bold text-center">트위터</a>
          <a class="px-4 py-3 rounded-lg bg-slate-700 font-bold text-center">링크복사</a>
        </div>
      </div>

      <!-- 결과 하단 CTA (항상 넓게) -->
      <div class="mt-6">
        <a href="#" class="btn cta-wide px-6 py-4 rounded-xl bg-fuchsia-600 hover:bg-fuchsia-500 text-base sm:text-lg font-extrabold tracking-tight text-center block">
          🔮 무료 운세 보러가기
        </a>
      </div>
    </section>
  </main>

  <script>
    // 거실 방향 가이드 토글
    function toggleDirectionGuide(){
      const el = document.getElementById('direction-guide');
      el.classList.toggle('hidden');
    }

    // 선택된 방향 강조
    let selectedDir = null;
    document.querySelectorAll('.dir').forEach(btn => {
      btn.addEventListener('click', () => {
        selectedDir = btn.dataset.dir;
        document.querySelectorAll('.dir').forEach(b => b.classList.remove('ring-2','ring-emerald-400'));
        btn.classList.add('ring-2','ring-emerald-400');
      });
    });

    // 결과 보기
    document.getElementById('start').addEventListener('click', () => {
      document.getElementById('result').classList.remove('hidden');

      // 결과가 열릴 때도 CTA 폭이 유지되도록 한 번 더 강제
      document.querySelectorAll('.cta-wide').forEach(el => {
        el.style.width = '100%';
        el.style.maxWidth = '560px';
      });
    });
  </script>
</body>
</html>
